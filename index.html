<!DOCTYPE html>
<html lang="en">
<head>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1627503240807606"
     crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- MAIN SEO TITLE (HIGH CTR + KEYWORDS) -->
<title>
FastResizePro | Resize, Compress, Crop, Convert & Optimize Images Online Fast
</title>

<!-- PRIMARY SEO META -->
<meta name="description"
content="FastResizePro is a complete image processing suite. Resize, compress, crop, rotate, convert to JPG and watermark images instantly. Fast, secure and free online image optimizer.">

<meta name="keywords"
content="resize image online, compress image free, crop image tool, convert png to jpg, watermark image online, fast image optimizer, batch image processing, reduce image size, image tools online, free image resizer">

<meta name="author" content="FastResizePro">
<meta name="robots" content="index, follow, max-image-preview:large">

<!-- GOOGLE VERIFICATION + ADSENSE -->
<meta name="google-site-verification"
content="doDleI5gM_PdDKrOGrMKgHP5Mp2z6bo7kDlffOJcZh8">

<meta name="google-adsense-account"
content="ca-pub-1627503240807606">

<!-- MULTI LANGUAGE SEO -->
<link rel="alternate" hreflang="en" href="https://fastresizepro.com/en/">
<link rel="alternate" hreflang="es" href="https://fastresizepro.com/es/">
<link rel="alternate" hreflang="x-default" href="https://fastresizepro.com/">

<!-- OPEN GRAPH (FACEBOOK / LINKEDIN) -->
<meta property="og:title"
content="FastResizePro - Fastest Online Image Processing Tool">

<meta property="og:description"
content="Resize, compress, crop, convert and watermark images instantly online with FastResizePro. Free and ultra fast image optimizer.">

<meta property="og:type" content="website">
<meta property="og:url" content="https://fastresizepro.com">
<meta property="og:image" content="https://fastresizepro.com/preview.jpg">

<!-- TWITTER SEO -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title"
content="FastResizePro | Online Image Resizer & Compressor">
<meta name="twitter:description"
content="Free online image resizer, compressor and converter. Optimize images instantly.">
<meta name="twitter:image"
content="https://fastresizepro.com/preview.jpg">

<!--  SCHEMA ORG (GOOGLE AI UNDERSTANDING) -->
<script type="application/ld+json">
{
 "@context":"https://schema.org",
 "@type":"SoftwareApplication",
 "name":"FastResizePro",
 "url":"https://fastresizepro.com",
 "applicationCategory":"MultimediaApplication",
 "operatingSystem":"Web",
 "description":"Online image processing suite to resize, compress, crop, convert and optimize images instantly.",
 "offers":{
   "@type":"Offer",
   "price":"0",
   "priceCurrency":"USD"
 },
 "creator":{
   "@type":"Organization",
   "name":"FastResizePro"
 },
 "featureList":[
   "Resize Image",
   "Compress Image",
   "Crop Image",
   "Convert Image",
   "Watermark Image",
   "Batch Processing"
 ]
}
</script>

    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- JSZip -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --primary-light: #60a5fa;
            --secondary: #7c3aed;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --darker: #0a0f1e;
            --light: #f8fafc;
            --gray: #64748b;
            --gray-light: #e2e8f0;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header Styles */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-content {
            max-width: 1440px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }

        .logo i {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 1.75rem;
        }

        /* Search Bar */
        .search-container {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border: 2px solid var(--gray-light);
            border-radius: 50px;
            font-size: 0.95rem;
            transition: all 0.3s;
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 12px;
            margin-top: 0.5rem;
            box-shadow: var(--shadow-lg);
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid var(--gray-light);
        }

        .search-result-item:hover {
            background: var(--gray-light);
        }

        .search-result-item i {
            color: var(--primary);
            width: 20px;
        }

        /* Navigation Menu */
        .nav-menu {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .dropdown {
            position: relative;
        }

        .dropdown-btn {
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .dropdown-btn:hover {
            background: var(--gray-light);
            color: var(--primary);
        }

        .dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            min-width: 280px;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            padding: 0.75rem;
            display: none;
            z-index: 100;
            max-height: 500px;
            overflow-y: auto;
        }

        .dropdown.active .dropdown-content {
            display: block;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--dark);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .dropdown-item:hover {
            background: var(--gray-light);
            color: var(--primary);
            transform: translateX(5px);
        }

        .dropdown-item i {
            width: 20px;
            color: var(--primary);
        }

        .dropdown-category {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--gray);
            letter-spacing: 1px;
        }

        /* Main Content */
        .main-content {
            max-width: 1440px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        /* Tool Container */
        .tool-container {
            background: white;
            border-radius: 24px;
            box-shadow: var(--shadow-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tool-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gray-light);
        }

        .tool-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .tool-description {
            color: var(--gray);
            font-size: 1rem;
        }

        /* Upload Area */
        .upload-area {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            color: white;
        }

        .upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.2) 100%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .upload-area:hover::before {
            opacity: 1;
        }

        .upload-area.dragover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: white;
        }

        .upload-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .upload-subtitle {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        /* Controls Grid */
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-group {
            background: white;
            border: 2px solid var(--gray-light);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .control-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .control-label i {
            color: var(--primary);
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .input-group label {
            min-width: 80px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .input-field {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .input-field[type="range"] {
            padding: 0;
            accent-color: var(--primary);
        }

        /* Button Styles */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #0d9488);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .quick-action {
            background: white;
            border: 2px solid var(--gray-light);
            border-radius: 16px;
            padding: 1.25rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            color: var(--dark);
        }

        .quick-action:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .quick-action i {
            font-size: 1.75rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .quick-action span {
            display: block;
            font-weight: 600;
        }

        /* Preview Section */
        .preview-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .preview-card {
            background: white;
            border: 2px solid var(--gray-light);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
        }

        .preview-card h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .preview-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        .preview-info {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-light);
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Aspect Ratio Grid */
        .aspect-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.75rem;
            margin-top: 1rem;
            max-height: 300px;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .aspect-btn {
            padding: 0.5rem;
            background: white;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
        }

        .aspect-btn:hover {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
        }

        .aspect-btn.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        /* Progress Bar */
        .progress-container {
            display: none;
            margin-top: 2rem;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            height: 8px;
            background: var(--gray-light);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s;
            border-radius: 10px;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }

        .toast {
            background: white;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--danger);
        }

        .toast.warning {
            border-left: 4px solid var(--warning);
        }

        .toast i {
            font-size: 1.25rem;
        }

        .toast.success i {
            color: var(--success);
        }

        .toast.error i {
            color: var(--danger);
        }

        .toast.warning i {
            color: var(--warning);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(37, 99, 235, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .header-content {
                flex-direction: column;
                padding: 1rem;
            }
            
            .search-container {
                max-width: 100%;
            }
            
            .nav-menu {
                width: 100%;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .main-content {
                padding: 0 1rem;
            }
        }

        @media (max-width: 768px) {
            .controls-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .tool-title {
                font-size: 1.5rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }

        /* EXIF Viewer */
        .exif-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .exif-data {
            background: var(--gray-light);
            border-radius: 12px;
            padding: 1.5rem;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .exif-row {
            display: flex;
            padding: 0.5rem;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .exif-label {
            font-weight: 700;
            width: 150px;
            color: var(--dark);
        }

        .exif-value {
            color: var(--gray);
        }

        /* DPI Calculator */
        .dpi-calculator {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 1.5rem;
            color: white;
        }

        .dpi-result {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }

        /* Hide default */
        [data-page] {
            display: none;
        }

        [data-page].active {
            display: block;
        }

        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: white;
        }

        .breadcrumb a {
            color: white;
            text-decoration: none;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .breadcrumb a:hover {
            opacity: 1;
        }

        .breadcrumb i {
            font-size: 0.75rem;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo" onclick="showPage('home')">
                <i class="fas fa-bolt"></i>
                FastResizePro
            </a>

            <!-- Search Bar -->
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="globalSearch" placeholder="Search tools (e.g., resize, compress, crop...)" autocomplete="off">
                <div class="search-results" id="searchResults"></div>
            </div>

            <!-- Navigation Menu with Dropdowns -->
            <nav class="nav-menu">
                <div class="dropdown" id="imageToolsDropdown">
                    <button class="dropdown-btn" onclick="toggleDropdown('imageToolsDropdown')">
                        <i class="fas fa-tools"></i> Image Tools <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-content">
                        <div class="dropdown-category">RESIZE & SCALE</div>
                        <a href="#" class="dropdown-item" onclick="showPage('resize-percentage')"><i class="fas fa-percent"></i> Resize by Percentage</a>
                        <a href="#" class="dropdown-item" onclick="showPage('resize-aspect-ratio')"><i class="fas fa-arrows-alt"></i> Advanced Resize + Aspect</a>
                        <a href="#" class="dropdown-item" onclick="showPage('resize-dimensions')"><i class="fas fa-ruler"></i> Resize with DPI</a>
                        <a href="#" class="dropdown-item" onclick="showPage('upscale-image')"><i class="fas fa-expand"></i> Upscale Image</a>
                        <script>
  atOptions = {
    'key' : '2676c8da7be0f7457deefe98d039a56b',
    'format' : 'iframe',
    'height' : 60,
    'width' : 468,
    'params' : {}
  };
</script>
                        <div class="dropdown-category">COMPRESS & OPTIMIZE</div>
                        <a href="#" class="dropdown-item" onclick="showPage('compress-image')"><i class="fas fa-compress"></i> Compress Image</a>
                        <a href="#" class="dropdown-item" onclick="showPage('optimize-image')"><i class="fas fa-magic"></i> Optimize Image</a>
                        <a href="#" class="dropdown-item" onclick="showPage('resize-to-kb')"><i class="fas fa-file"></i> Resize to KB</a>
                        
                        <div class="dropdown-category">CROP & TRANSFORM</div>
                        <a href="#" class="dropdown-item" onclick="showPage('crop-image')"><i class="fas fa-crop"></i> Crop Image</a>
                        <a href="#" class="dropdown-item" onclick="showPage('rotate-image')"><i class="fas fa-undo-alt"></i> Rotate Image</a>
                        <a href="#" class="dropdown-item" onclick="showPage('mirror-image')"><i class="fas fa-arrows-alt-h"></i> Mirror Image</a>
                        <a href="#" class="dropdown-item" onclick="showPage('pixelate-image')"><i class="fas fa-th"></i> Pixelate Image</a>
                        
                        <div class="dropdown-category">CONVERT & EXPORT</div>
                        <a href="#" class="dropdown-item" onclick="showPage('convert-to-webp')"><i class="fas fa-file-image"></i> Convert to WebP</a>
                        
                        <div class="dropdown-category">WATERMARK & METADATA</div>
                        <a href="#" class="dropdown-item" onclick="showPage('add-watermark')"><i class="fas fa-copyright"></i> Add Watermark</a>
                        <a href="#" class="dropdown-item" onclick="showPage('exif-viewer')"><i class="fas fa-info-circle"></i> EXIF Viewer</a>
                    </div>
                </div>

                <div class="dropdown" id="socialToolsDropdown">
                    <button class="dropdown-btn" onclick="toggleDropdown('socialToolsDropdown')">
                        <i class="fas fa-share-alt"></i> Social Media <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-content">
                        <div class="dropdown-category">PLATFORM PRESETS</div>
                        <a href="#" class="dropdown-item" onclick="showPage('social-media-resizer')"><i class="fas fa-instagram"></i> Instagram</a>
                        <a href="#" class="dropdown-item" onclick="showPage('social-media-resizer')"><i class="fab fa-facebook"></i> Facebook</a>
                        <a href="#" class="dropdown-item" onclick="showPage('social-media-resizer')"><i class="fab fa-twitter"></i> Twitter</a>
                        <a href="#" class="dropdown-item" onclick="showPage('social-media-resizer')"><i class="fab fa-linkedin"></i> LinkedIn</a>
                        <a href="#" class="dropdown-item" onclick="showPage('social-media-resizer')"><i class="fab fa-youtube"></i> YouTube</a>
                        <a href="#" class="dropdown-item" onclick="showPage('social-media-resizer')"><i class="fab fa-pinterest"></i> Pinterest</a>
                    </div>
                </div>

                <div class="dropdown" id="printToolsDropdown">
                    <button class="dropdown-btn" onclick="toggleDropdown('printToolsDropdown')">
                        <i class="fas fa-print"></i> Print & Batch <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-content">
                        <div class="dropdown-category">PRINT SIZES</div>
                        <a href="#" class="dropdown-item" onclick="showPage('print-resize')"><i class="fas fa-file"></i> Print Resize</a>
                        <a href="#" class="dropdown-item" onclick="showPage('dimension-calculator')"><i class="fas fa-calculator"></i> Dimension Calculator</a>
                        
                        <div class="dropdown-category">BATCH PROCESSING</div>
                        <a href="#" class="dropdown-item" onclick="showPage('batch-resize')"><i class="fas fa-layer-group"></i> Batch Resize</a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Breadcrumb -->
        <div class="breadcrumb" id="breadcrumb">
            <a href="#" onclick="showPage('home')">Home</a>
            <i class="fas fa-chevron-right"></i>
            <span id="currentPageName">Dashboard</span>
        </div>

        <!-- Toast Container -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- HOME PAGE -->
        <div data-page="home" class="active">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Complete Image Processing Suite</h1>
                    <p class="tool-description">Professional tools for all your image editing needs. 100% free, no registration required.</p>
                </div>

                <!-- Quick Actions -->
                <h2 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-bolt" style="color: var(--primary);"></i>
                    Quick Actions
                </h2>
                <div class="quick-actions">
                    <a href="#" class="quick-action" onclick="showPage('compress-image')">
                        <i class="fas fa-compress-alt"></i>
                        <span>Compress Image</span>
                    </a>
                    <a href="#" class="quick-action" onclick="showPage('crop-image')">
                        <i class="fas fa-crop"></i>
                        <span>Crop Image</span>
                    </a>
                    <a href="#" class="quick-action" onclick="showPage('rotate-image')">
                        <i class="fas fa-redo-alt"></i>
                        <span>Rotate Image</span>
                    </a>
                    <a href="#" class="quick-action" onclick="showPage('convert-to-webp')">
                        <i class="fas fa-file-image"></i>
                        <span>Convert to WebP</span>
                    </a>
                    <a href="#" class="quick-action" onclick="showPage('add-watermark')">
                        <i class="fas fa-copyright"></i>
                        <span>Watermark Image</span>
                    </a>
                </div>

                <!-- Tools Grid -->
                <h2 style="margin: 2rem 0 1rem; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-cubes" style="color: var(--primary);"></i>
                    Popular Tools
                </h2>
                <div class="controls-grid">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-arrows-alt"></i>
                            <span>Resize Image</span>
                        </div>
                        <p style="color: var(--gray); margin-bottom: 1rem;">Resize images by percentage or exact dimensions</p>
                        <button class="btn btn-primary" onclick="showPage('resize-percentage')">
                            <i class="fas fa-arrow-right"></i> Open Tool
                        </button>
                    </div>
                    
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-compress"></i>
                            <span>Compress Image</span>
                        </div>
                        <p style="color: var(--gray); margin-bottom: 1rem;">Reduce file size while maintaining quality</p>
                        <button class="btn btn-primary" onclick="showPage('compress-image')">
                            <i class="fas fa-arrow-right"></i> Open Tool
                        </button>
                    </div>
                    
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-crop"></i>
                            <span>Crop Image</span>
                        </div>
                        <p style="color: var(--gray); margin-bottom: 1rem;">Crop images to exact dimensions</p>
                        <button class="btn btn-primary" onclick="showPage('crop-image')">
                            <i class="fas fa-arrow-right"></i> Open Tool
                        </button>
                    </div>
                    
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-magic"></i>
                            <span>Social Media Resize</span>
                        </div>
                        <p style="color: var(--gray); margin-bottom: 1rem;">Perfect sizes for all social platforms</p>
                        <button class="btn btn-primary" onclick="showPage('social-media-resizer')">
                            <i class="fas fa-arrow-right"></i> Open Tool
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- RESIZE PERCENTAGE PAGE (fully implemented) -->
        <div data-page="resize-percentage">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Resize Image by Percentage</h1>
                    <p class="tool-description">Scale your images up or down by percentage. Perfect for batch resizing.</p>
                </div>

                <div class="upload-area" id="percentageUpload" onclick="document.getElementById('percentageFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Drop your images here</h3>
                    <p class="upload-subtitle">or click to browse (JPG, PNG, WebP)</p>
                    <input type="file" id="percentageFileInput" accept="image/*" style="display: none;" onchange="percentageHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="percentagePreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalPercentageImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalPercentageInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Resized</h4>
                        <img id="resizedPercentageImage" class="preview-image" src="" alt="Resized">
                        <div class="preview-info" id="resizedPercentageInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="percentageControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-percent"></i>
                            <span>Resize Percentage</span>
                        </div>
                        <div class="input-group">
                            <label>Percentage</label>
                            <input type="range" id="percentageSlider" class="input-field" min="1" max="200" value="100" oninput="percentageUpdatePreview()">
                            <input type="number" id="percentageValue" class="input-field" min="1" max="200" value="100" style="width: 80px;" onchange="percentageUpdateSlider()">
                        </div>
                        <div style="margin-top: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="keepAspectPercentage" checked onchange="percentageUpdatePreview()">
                                <span>Keep aspect ratio</span>
                            </label>
                        </div>
                        <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                            <div>
                                <label style="font-size: 0.9rem; color: var(--gray);">Width (px)</label>
                                <input type="number" id="percentageWidth" class="input-field" readonly>
                            </div>
                            <div>
                                <label style="font-size: 0.9rem; color: var(--gray);">Height (px)</label>
                                <input type="number" id="percentageHeight" class="input-field" readonly>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="progress-container" id="percentageProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="percentageProgressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="percentageProgressText">0% Complete</span>
                        <span id="percentageProgressTime">Processing...</span>
                    </div>
                </div>

                <div class="btn-group" id="percentageActions" style="display: none;">
                    <button class="btn btn-primary" onclick="percentageProcessResize()">
                        <i class="fas fa-magic"></i> Resize Image
                    </button>
                    <button class="btn btn-success" id="downloadPercentageBtn" onclick="percentageDownloadImage()" style="display: none;">
                        <i class="fas fa-download"></i> Download Resized Image
                    </button>
                    <button class="btn btn-outline" onclick="percentageResetTool()">
                        <i class="fas fa-redo"></i> Back
                    </button>
                </div>
            </div>
        </div>

        <!-- ADVANCED RESIZE + ASPECT RATIO PAGE (fully implemented) -->
        <div data-page="resize-aspect-ratio">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Advanced Resize + Aspect Ratios</h1>
                    <p class="tool-description">Resize images with perfect aspect ratios for any platform.</p>
                </div>

                <div class="upload-area" id="aspectUpload" onclick="document.getElementById('aspectFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload your image</h3>
                    <p class="upload-subtitle">Click to browse or drag & drop</p>
                    <input type="file" id="aspectFileInput" accept="image/*" style="display: none;" onchange="aspectHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="aspectPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original with Grid Overlay</h4>
                        <div style="position: relative;">
                            <img id="originalAspectImage" class="preview-image" src="" alt="Original">
                            <canvas id="gridOverlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></canvas>
                        </div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Cropped Preview</h4>
                        <img id="resizedAspectImage" class="preview-image" src="" alt="Cropped">
                    </div>
                </div>

                <div class="control-group" id="aspectControls" style="display: none; margin-top: 1.5rem;">
                    <div class="control-label">
                        <i class="fas fa-arrows-alt"></i>
                        <span>Aspect Ratio Presets</span>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                        <select id="aspectRatioCategory" class="input-field" style="max-width: 200px;" onchange="aspectLoadPresets()">
                            <option value="standard">Standard Ratios</option>
                            <option value="social">Social Media</option>
                            <option value="print">Print Sizes</option>
                            <option value="paper">Paper Sizes</option>
                        </select>
                    </div>

                    <div class="aspect-grid" id="aspectPresetGrid"></div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1.5rem;">
                        <div class="input-group">
                            <label>Width (px)</label>
                            <input type="number" id="aspectWidth" class="input-field" placeholder="Width" onchange="aspectUpdateCrop()">
                        </div>
                        <div class="input-group">
                            <label>Height (px)</label>
                            <input type="number" id="aspectHeight" class="input-field" placeholder="Height" onchange="aspectUpdateCrop()">
                        </div>
                    </div>

                    <div style="margin-top: 1.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="fitMode" checked onchange="aspectUpdateCrop()">
                            <span>Fit (preserve full image)</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                            <input type="checkbox" id="fillMode" onchange="aspectUpdateCrop()">
                            <span>Fill (cover entire area)</span>
                        </label>
                    </div>

                    <button class="btn btn-primary" style="margin-top: 1.5rem; width: 100%;" onclick="aspectProcessResize()">
                        <i class="fas fa-crop"></i> Apply Crop & Resize
                    </button>
                </div>

                <div class="btn-group" id="aspectDownloadBtn" style="display: none; margin-top: 1.5rem;">
                    <button class="btn btn-success" onclick="aspectDownloadImage()">
                        <i class="fas fa-download"></i> Download Processed Image
                    </button>
                    <button class="btn btn-outline" onclick="aspectResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- COMPRESS IMAGE PAGE (fully implemented) -->
        <div data-page="compress-image">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Compress Image</h1>
                    <p class="tool-description">Reduce file size while maintaining visual quality.</p>
                </div>

                <div class="upload-area" id="compressUpload" onclick="document.getElementById('compressFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to compress</h3>
                    <p class="upload-subtitle">JPG, PNG, WebP supported</p>
                    <input type="file" id="compressFileInput" accept="image/*" style="display: none;" onchange="compressHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="compressPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalCompressImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalCompressInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-compress"></i> Compressed</h4>
                        <img id="compressedImage" class="preview-image" src="" alt="Compressed">
                        <div class="preview-info" id="compressedInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="compressControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-sliders-h"></i>
                            <span>Compression Method</span>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <input type="radio" name="compressMethod" value="auto" checked onchange="compressToggleMethod()">
                                <span>Auto (Preserve quality)</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="radio" name="compressMethod" value="manual" onchange="compressToggleMethod()">
                                <span>Manual (Target file size)</span>
                            </label>
                        </div>

                        <div id="autoCompressControls">
                            <label>Quality</label>
                            <input type="range" id="compressQuality" class="input-field" min="1" max="100" value="80" oninput="compressUpdateQualityLabel()">
                            <span id="compressQualityValue" style="margin-left: 0.5rem;">80%</span>
                        </div>

                        <div id="manualCompressControls" style="display: none;">
                            <label>Target File Size</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="range" id="targetSizeSlider" class="input-field" min="10" max="10240" value="500" oninput="compressUpdateTargetLabel()">
                                <input type="number" id="targetSizeValue" class="input-field" min="10" max="10240" value="500" style="width: 100px;" onchange="compressUpdateTargetSlider()">
                            </div>
                            <span id="targetSizeLabel" style="display: block; margin-top: 0.5rem;">500 KB</span>
                        </div>
                    </div>
                </div>

                <div class="btn-group" id="compressActions" style="display: none;">
                    <button class="btn btn-primary" onclick="compressProcess()">
                        <i class="fas fa-compress"></i> Compress Image
                    </button>
                    <button class="btn btn-success" id="downloadCompressedBtn" onclick="compressDownloadImage()" style="display: none;">
                        <i class="fas fa-download"></i> Download Compressed Image
                    </button>
                    <button class="btn btn-outline" onclick="compressResetTool()">
                        <i class="fas fa-redo"></i> Back
                    </button>
                </div>

                <div class="progress-container" id="compressProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="compressProgressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="compressProgressText">0% Complete</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- MIRROR IMAGE PAGE (fully implemented) -->
        <div data-page="mirror-image">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Mirror Image</h1>
                    <p class="tool-description">Flip images horizontally or vertically.</p>
                </div>

                <div class="upload-area" id="mirrorUpload" onclick="document.getElementById('mirrorFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to mirror</h3>
                    <p class="upload-subtitle">Click to browse or drag & drop</p>
                    <input type="file" id="mirrorFileInput" accept="image/*" style="display: none;" onchange="mirrorHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="mirrorPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalMirrorImage" class="preview-image" src="" alt="Original">
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Mirrored</h4>
                        <img id="mirroredImage" class="preview-image" src="" alt="Mirrored">
                    </div>
                </div>

                <div class="btn-group" id="mirrorControls" style="display: none; justify-content: center;">
                    <button class="btn btn-outline" onclick="mirrorApply('horizontal')">
                        <i class="fas fa-arrows-alt-h"></i> Horizontal Mirror
                    </button>
                    <button class="btn btn-outline" onclick="mirrorApply('vertical')">
                        <i class="fas fa-arrows-alt-v"></i> Vertical Mirror
                    </button>
                </div>

                <div class="btn-group" id="mirrorDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="mirrorDownloadImage()">
                        <i class="fas fa-download"></i> Download Mirrored Image
                    </button>
                    <button class="btn btn-outline" onclick="mirrorResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- PIXELATE IMAGE PAGE (fully implemented) -->
        <div data-page="pixelate-image">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Pixelate Image</h1>
                    <p class="tool-description">Add pixelation effects to your images.</p>
                </div>

                <div class="upload-area" id="pixelateUpload" onclick="document.getElementById('pixelateFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to pixelate</h3>
                    <p class="upload-subtitle">Click to browse or drag & drop</p>
                    <input type="file" id="pixelateFileInput" accept="image/*" style="display: none;" onchange="pixelateHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="pixelatePreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalPixelateImage" class="preview-image" src="" alt="Original">
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Pixelated</h4>
                        <img id="pixelatedImage" class="preview-image" src="" alt="Pixelated">
                    </div>
                </div>

                <div class="controls-grid" id="pixelateControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-th"></i>
                            <span>Pixelation Level</span>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <input type="range" id="pixelateLevel" class="input-field" min="2" max="50" value="10" oninput="pixelateUpdatePreview()">
                            <span id="pixelateLevelValue" style="margin-left: 0.5rem;">10px</span>
                        </div>

                        <div>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="blackWhiteMode" onchange="pixelateUpdatePreview()">
                                <span>Black & White Mode</span>
                            </label>
                        </div>

                        <button class="btn btn-primary" style="margin-top: 1.5rem; width: 100%;" onclick="pixelateApplyEffect()">
                            <i class="fas fa-magic"></i> Apply Effect
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="pixelateDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="pixelateDownloadImage()">
                        <i class="fas fa-download"></i> Download Pixelated Image
                    </button>
                    <button class="btn btn-outline" onclick="pixelateResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- ROTATE IMAGE PAGE (fully implemented) -->
        <div data-page="rotate-image">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Rotate Image</h1>
                    <p class="tool-description">Rotate images by 90 increments or custom angles.</p>
                </div>

                <div class="upload-area" id="rotateUpload" onclick="document.getElementById('rotateFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to rotate</h3>
                    <p class="upload-subtitle">Click to browse or drag & drop</p>
                    <input type="file" id="rotateFileInput" accept="image/*" style="display: none;" onchange="rotateHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="rotatePreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalRotateImage" class="preview-image" src="" alt="Original">
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Rotated</h4>
                        <img id="rotatedImage" class="preview-image" src="" alt="Rotated">
                    </div>
                </div>

                <div class="controls-grid" id="rotateControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-undo-alt"></i>
                            <span>Rotation Options</span>
                        </div>
                        
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem;">
                            <button class="btn btn-outline" onclick="rotateApply(-90)">
                                <i class="fas fa-undo"></i> Rotate Left 90
                            </button>
                            <button class="btn btn-outline" onclick="rotateApply(90)">
                                <i class="fas fa-redo"></i> Rotate Right 90
                            </button>
                        </div>

                        <div style="margin-top: 1rem;">
                            <label>Custom Angle</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="range" id="customAngle" class="input-field" min="0" max="360" value="0" oninput="rotateUpdateAngleLabel()">
                                <input type="number" id="angleValue" class="input-field" min="0" max="360" value="0" style="width: 80px;" onchange="rotateUpdateAngleSlider()">
                            </div>
                            <span id="angleLabel">0</span>
                            
                            <button class="btn btn-primary" style="margin-top: 1rem; width: 100%;" onclick="rotateApplyCustom()">
                                <i class="fas fa-sync"></i> Apply Rotation
                            </button>
                        </div>
                    </div>
                </div>

                <div class="btn-group" id="rotateDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="rotateDownloadImage()">
                        <i class="fas fa-download"></i> Download Rotated Image
                    </button>
                    <button class="btn btn-outline" onclick="rotateResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- SOCIAL MEDIA RESIZER PAGE (fully implemented) -->
        <div data-page="social-media-resizer">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Social Media Image Resizer</h1>
                    <p class="tool-description">Perfect image sizes for all social platforms.</p>
                </div>

                <div class="upload-area" id="socialUpload" onclick="document.getElementById('socialFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image for social media</h3>
                    <p class="upload-subtitle">Click to browse or drag & drop</p>
                    <input type="file" id="socialFileInput" accept="image/*" style="display: none;" onchange="socialHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="socialPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalSocialImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalSocialInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Resized for Social</h4>
                        <img id="socialResizedImage" class="preview-image" src="" alt="Resized">
                        <div class="preview-info" id="socialResizedInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="socialControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-share-alt"></i>
                            <span>Platform & Format</span>
                        </div>
                        
                        <select id="socialPlatform" class="input-field" style="margin-bottom: 1rem;" onchange="socialUpdatePreset()">
                            <optgroup label="Instagram">
                                <option value="ig-post">Instagram Post (1:1) - 10801080</option>
                                <option value="ig-portrait">Instagram Portrait (4:5) - 10801350</option>
                                <option value="ig-landscape">Instagram Landscape (1.91:1) - 1080566</option>
                                <option value="ig-story">Instagram Story (9:16) - 10801920</option>
                                <option value="ig-profile">Instagram Profile (1:1) - 320320</option>
                            </optgroup>
                            <optgroup label="Facebook">
                                <option value="fb-post">Facebook Post (1.91:1) - 1200630</option>
                                <option value="fb-cover">Facebook Cover (16:9) - 820462</option>
                                <option value="fb-profile">Facebook Profile (1:1) - 180180</option>
                            </optgroup>
                            <optgroup label="Twitter">
                                <option value="tw-post">Twitter Post (16:9) - 1200675</option>
                                <option value="tw-header">Twitter Header (3:1) - 1500500</option>
                                <option value="tw-profile">Twitter Profile (1:1) - 400400</option>
                            </optgroup>
                            <optgroup label="LinkedIn">
                                <option value="li-post">LinkedIn Post (1.91:1) - 1200627</option>
                                <option value="li-cover">LinkedIn Background (4:1) - 1584396</option>
                                <option value="li-profile">LinkedIn Profile (1:1) - 400400</option>
                            </optgroup>
                            <optgroup label="Pinterest">
                                <option value="pin-pin">Pinterest Pin (2:3) - 10001500</option>
                                <option value="pin-profile">Pinterest Profile (1:1) - 165165</option>
                            </optgroup>
                            <optgroup label="YouTube">
                                <option value="yt-thumbnail">YouTube Thumbnail (16:9) - 1280720</option>
                                <option value="yt-cover">YouTube Channel Art (16:9) - 25601440</option>
                                <option value="yt-profile">YouTube Profile (1:1) - 800800</option>
                            </optgroup>
                        </select>

                        <div style="margin-bottom: 1rem;">
                            <label>Resize Type</label>
                            <select id="resizeType" class="input-field">
                                <option value="fit">FIT (Preserve full image)</option>
                                <option value="fill">FILL (Cover area, may crop)</option>
                                <option value="stretch">STRETCH (Distort to fit)</option>
                            </select>
                        </div>

                        <div style="display: flex; gap: 0.5rem;">
                            <input type="number" id="socialWidth" class="input-field" placeholder="Width" readonly>
                            <span></span>
                            <input type="number" id="socialHeight" class="input-field" placeholder="Height" readonly>
                        </div>

                        <button class="btn btn-primary" style="margin-top: 1.5rem; width: 100%;" onclick="socialProcessResize()">
                            <i class="fas fa-magic"></i> Resize for Social Media
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="socialDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="socialDownloadImage()">
                        <i class="fas fa-download"></i> Download Social Media Image
                    </button>
                    <button class="btn btn-outline" onclick="socialResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- RESIZE TO KILOBYTES PAGE (fully implemented) -->
        <div data-page="resize-to-kb">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Resize Image to Exact File Size</h1>
                    <p class="tool-description">Compress images to specific kilobyte or megabyte targets.</p>
                </div>

                <div class="upload-area" id="kbUpload" onclick="document.getElementById('kbFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to resize</h3>
                    <p class="upload-subtitle">Target specific file sizes</p>
                    <input type="file" id="kbFileInput" accept="image/*" style="display: none;" onchange="kbHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="kbPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalKBImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalKBInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-file"></i> Resized</h4>
                        <img id="resizedKBImage" class="preview-image" src="" alt="Resized">
                        <div class="preview-info" id="resizedKBInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="kbControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-file"></i>
                            <span>Target File Size</span>
                        </div>
                        
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                            <select id="kbPreset" class="input-field" onchange="kbUpdatePreset()">
                                <option value="10">10 KB</option>
                                <option value="20">20 KB</option>
                                <option value="50">50 KB</option>
                                <option value="100">100 KB</option>
                                <option value="200">200 KB</option>
                                <option value="500">500 KB</option>
                                <option value="1024">1 MB</option>
                                <option value="2048">2 MB</option>
                                <option value="5120">5 MB</option>
                                <option value="10240">10 MB</option>
                                <option value="custom">Custom Size</option>
                            </select>
                        </div>

                        <div id="customKBSize" style="display: none; margin-bottom: 1rem;">
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="number" id="customKBValue" class="input-field" placeholder="Enter size" min="1">
                                <select id="customKBUnit" class="input-field" style="width: 100px;">
                                    <option value="KB">KB</option>
                                    <option value="MB">MB</option>
                                </select>
                            </div>
                        </div>

                        <button class="btn btn-primary" style="width: 100%;" onclick="kbProcessResize()">
                            <i class="fas fa-file"></i> Resize to Target Size
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="kbDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="kbDownloadImage()">
                        <i class="fas fa-download"></i> Download Resized Image
                    </button>
                    <button class="btn btn-outline" onclick="kbResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>

                <div class="progress-container" id="kbProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="kbProgressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="kbProgressText">Optimizing to target size...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- PRINT RESIZE PAGE (fully implemented) -->
        <div data-page="print-resize">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Print Resize</h1>
                    <p class="tool-description">Resize images for printing with exact dimensions and DPI.</p>
                </div>

                <div class="upload-area" id="printUpload" onclick="document.getElementById('printFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image for print</h3>
                    <p class="upload-subtitle">Optimize for physical printing</p>
                    <input type="file" id="printFileInput" accept="image/*" style="display: none;" onchange="printHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="printPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalPrintImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalPrintInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-print"></i> Print Ready</h4>
                        <img id="printReadyImage" class="preview-image" src="" alt="Print Ready">
                        <div class="preview-info" id="printReadyInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="printControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-ruler"></i>
                            <span>Print Dimensions</span>
                        </div>
                        
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                            <select id="printUnit" class="input-field" style="width: 100px;" onchange="printUpdateUnit()">
                                <option value="inch">Inches</option>
                                <option value="cm">Centimeters</option>
                                <option value="mm">Millimeters</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Paper Size Presets</label>
                            <select id="printPreset" class="input-field" onchange="printApplyPreset()">
                                <optgroup label="Standard Sizes">
                                    <option value="letter">Letter (8.511")</option>
                                    <option value="legal">Legal (8.514")</option>
                                    <option value="tabloid">Tabloid (1117")</option>
                                </optgroup>
                                <optgroup label="Photo Sizes">
                                    <option value="4x6">46"</option>
                                    <option value="5x7">57"</option>
                                    <option value="8x10">810"</option>
                                    <option value="11x14">1114"</option>
                                    <option value="16x20">1620"</option>
                                    <option value="20x30">2030"</option>
                                </optgroup>
                                <optgroup label="A Series">
                                    <option value="a4">A4 (8.311.7")</option>
                                    <option value="a3">A3 (11.716.5")</option>
                                    <option value="a5">A5 (5.88.3")</option>
                                </optgroup>
                                <option value="custom">Custom Size</option>
                            </select>
                        </div>

                        <div id="customPrintSize" style="display: none; margin-bottom: 1rem;">
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="number" id="printWidth" class="input-field" placeholder="Width" step="0.01">
                                <span></span>
                                <input type="number" id="printHeight" class="input-field" placeholder="Height" step="0.01">
                            </div>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>DPI (Resolution)</label>
                            <select id="printDPI" class="input-field" onchange="printUpdateDPI()">
                                <option value="300">300 DPI (High quality)</option>
                                <option value="240">240 DPI (Good quality)</option>
                                <option value="200">200 DPI (Standard)</option>
                                <option value="150">150 DPI (Draft)</option>
                                <option value="96">96 DPI (Screen)</option>
                            </select>
                        </div>

                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1rem; border-radius: 12px; color: white;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>Print Size:</span>
                                <span id="printSizeDisplay">0  0 "</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>Pixel Dimensions:</span>
                                <span id="pixelSizeDisplay">0  0 px</span>
                            </div>
                        </div>

                        <button class="btn btn-primary" style="margin-top: 1.5rem; width: 100%;" onclick="printProcess()">
                            <i class="fas fa-print"></i> Prepare for Printing
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="printDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="printDownloadImage()">
                        <i class="fas fa-download"></i> Download Print-Ready Image
                    </button>
                    <button class="btn btn-outline" onclick="printResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- RESIZE WITH DIMENSIONS & DPI PAGE (fully implemented) -->
        <div data-page="resize-dimensions">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Resize with DPI</h1>
                    <p class="tool-description">Professional image resizing with exact dimensions and DPI control.</p>
                </div>

                <div class="upload-area" id="dpiUpload" onclick="document.getElementById('dpiFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to resize</h3>
                    <p class="upload-subtitle">Control dimensions, DPI, and format</p>
                    <input type="file" id="dpiFileInput" accept="image/*" style="display: none;" onchange="dpiHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="dpiPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalDPIImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalDPIInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Resized</h4>
                        <img id="resizedDPIImage" class="preview-image" src="" alt="Resized">
                        <div class="preview-info" id="resizedDPIInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="dpiControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-ruler"></i>
                            <span>Dimensions & DPI</span>
                        </div>
                        
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                            <select id="dpiUnit" class="input-field" onchange="dpiUpdateUnit()">
                                <option value="px">Pixels</option>
                                <option value="inch">Inches</option>
                                <option value="cm">Centimeters</option>
                            </select>
                        </div>

                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                            <div style="flex: 1;">
                                <label>Width</label>
                                <input type="number" id="dpiWidth" class="input-field" onchange="dpiUpdateFromDimensions()">
                            </div>
                            <div style="flex: 1;">
                                <label>Height</label>
                                <input type="number" id="dpiHeight" class="input-field" onchange="dpiUpdateFromDimensions()">
                            </div>
                        </div>

                        <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                            <input type="checkbox" id="dpiKeepAspect" checked onchange="dpiUpdateKeepAspect()">
                            <span>Keep aspect ratio</span>
                        </label>

                        <div style="margin-bottom: 1rem;">
                            <label>DPI</label>
                            <select id="dpiValue" class="input-field" onchange="dpiUpdateCalculations()">
                                <option value="300">300 DPI (Print)</option>
                                <option value="240">240 DPI (Print)</option>
                                <option value="96">96 DPI (Screen)</option>
                                <option value="72">72 DPI (Web)</option>
                                <option value="custom">Custom DPI</option>
                            </select>
                        </div>

                        <div id="customDPI" style="display: none; margin-bottom: 1rem;">
                            <input type="number" id="customDPIValue" class="input-field" placeholder="Enter DPI" min="1" max="1200" onchange="dpiUpdateCalculations()">
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Quality</label>
                            <input type="range" id="dpiQuality" class="input-field" min="1" max="100" value="90" oninput="dpiUpdateQualityLabel()">
                            <span id="dpiQualityValue" style="margin-left: 0.5rem;">90%</span>
                        </div>

                        <div class="dpi-calculator">
                            <h4 style="margin-bottom: 0.5rem;">DPI Calculator</h4>
                            <div id="dpiCalculation">
                                <div>Print Size: <span id="calcPrintSize">0  0 in</span></div>
                                <div>Pixels: <span id="calcPixels">0  0 px</span></div>
                            </div>
                        </div>

                        <button class="btn btn-primary" style="margin-top: 1.5rem; width: 100%;" onclick="dpiProcessResize()">
                            <i class="fas fa-magic"></i> Resize Image
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="dpiDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="dpiDownloadImage()">
                        <i class="fas fa-download"></i> Download Resized Image
                    </button>
                    <button class="btn btn-outline" onclick="dpiResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- DIMENSION CALCULATOR PAGE (fully implemented) -->
        <div data-page="dimension-calculator">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Photo Dimension Calculator</h1>
                    <p class="tool-description">Convert between inches, centimeters, millimeters, and pixels.</p>
                </div>

                <div class="controls-grid">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-calculator"></i>
                            <span>Dimension Converter</span>
                        </div>

                        <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="flex: 1;">
                                <label>From Unit</label>
                                <select id="calcFromUnit" class="input-field" onchange="dimensionCalculate()">
                                    <option value="px">Pixels (px)</option>
                                    <option value="in">Inches (in)</option>
                                    <option value="cm">Centimeters (cm)</option>
                                    <option value="mm">Millimeters (mm)</option>
                                </select>
                            </div>
                            <div style="flex: 1;">
                                <label>To Unit</label>
                                <select id="calcToUnit" class="input-field" onchange="dimensionCalculate()">
                                    <option value="px">Pixels (px)</option>
                                    <option value="in">Inches (in)</option>
                                    <option value="cm">Centimeters (cm)</option>
                                    <option value="mm">Millimeters (mm)</option>
                                </select>
                            </div>
                        </div>

                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem;">
                            <div style="flex: 1;">
                                <label>Width</label>
                                <input type="number" id="calcWidth" class="input-field" value="1920" oninput="dimensionCalculate()">
                            </div>
                            <div style="flex: 1;">
                                <label>Height</label>
                                <input type="number" id="calcHeight" class="input-field" value="1080" oninput="dimensionCalculate()">
                            </div>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>DPI (for pixel conversion)</label>
                            <input type="number" id="calcDPI" class="input-field" value="96" min="1" max="1200" oninput="dimensionCalculate()">
                        </div>

                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: 12px; color: white;">
                            <h4 style="margin-bottom: 1rem;">Conversion Results</h4>
                            <div style="display: grid; gap: 0.75rem;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Width:</span>
                                    <span id="calcResultWidth">0 px</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Height:</span>
                                    <span id="calcResultHeight">0 px</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.3);">
                                    <span>Aspect Ratio:</span>
                                    <span id="calcAspectRatio">16:9</span>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem; display: flex; gap: 0.5rem;">
                            <button class="btn btn-outline" onclick="dimensionSwapUnits()">
                                <i class="fas fa-exchange-alt"></i> Swap Units
                            </button>
                            <button class="btn btn-outline" onclick="dimensionReset()">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CROP IMAGE PAGE (fully implemented) -->
        <div data-page="crop-image">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Image Crop</h1>
                    <p class="tool-description">Crop images to exact coordinates.</p>
                </div>

                <div class="upload-area" id="cropUpload" onclick="document.getElementById('cropFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to crop</h3>
                    <p class="upload-subtitle">Click to browse or drag & drop</p>
                    <input type="file" id="cropFileInput" accept="image/*" style="display: none;" onchange="cropHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="cropPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-crop"></i> Crop Preview</h4>
                        <div style="position: relative;">
                            <img id="cropImage" class="preview-image" src="" alt="Crop" style="max-width: 100%;">
                            <div id="cropOverlay" style="position: absolute; border: 2px solid var(--primary); box-shadow: 0 0 0 9999px rgba(0,0,0,0.5); pointer-events: none;"></div>
                        </div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-edit"></i> Cropped Result</h4>
                        <img id="croppedImage" class="preview-image" src="" alt="Cropped">
                    </div>
                </div>

                <div class="controls-grid" id="cropControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-crop"></i>
                            <span>Crop Coordinates</span>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label>X Position</label>
                                <input type="number" id="cropX" class="input-field" value="0" min="0" onchange="cropUpdatePreview()">
                            </div>
                            <div>
                                <label>Y Position</label>
                                <input type="number" id="cropY" class="input-field" value="0" min="0" onchange="cropUpdatePreview()">
                            </div>
                            <div>
                                <label>Width</label>
                                <input type="number" id="cropWidth" class="input-field" value="500" min="1" onchange="cropUpdatePreview()">
                            </div>
                            <div>
                                <label>Height</label>
                                <input type="number" id="cropHeight" class="input-field" value="500" min="1" onchange="cropUpdatePreview()">
                            </div>
                        </div>

                        <div style="margin-top: 1rem;">
                            <label>Aspect Ratio Presets</label>
                            <select id="cropAspect" class="input-field" onchange="cropApplyAspect()">
                                <option value="custom">Custom</option>
                                <option value="1:1">Square (1:1)</option>
                                <option value="4:3">Standard (4:3)</option>
                                <option value="16:9">Widescreen (16:9)</option>
                                <option value="3:2">Photo (3:2)</option>
                            </select>
                        </div>

                        <button class="btn btn-primary" style="margin-top: 1.5rem; width: 100%;" onclick="cropProcess()">
                            <i class="fas fa-crop"></i> Crop Image
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="cropDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="cropDownloadImage()">
                        <i class="fas fa-download"></i> Download Cropped Image
                    </button>
                    <button class="btn btn-outline" onclick="cropResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- OPTIMIZE IMAGE PAGE (fully implemented) -->
        <div data-page="optimize-image">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Optimize Image</h1>
                    <p class="tool-description">Smart image optimization for web and mobile.</p>
                </div>

                <div class="upload-area" id="optimizeUpload" onclick="document.getElementById('optimizeFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to optimize</h3>
                    <p class="upload-subtitle">Auto-optimize for web performance</p>
                    <input type="file" id="optimizeFileInput" accept="image/*" style="display: none;" onchange="optimizeHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="optimizePreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalOptimizeImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalOptimizeInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-magic"></i> Optimized</h4>
                        <img id="optimizedImage" class="preview-image" src="" alt="Optimized">
                        <div class="preview-info" id="optimizedInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="optimizeControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-sliders-h"></i>
                            <span>Optimization Settings</span>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label>Size Presets</label>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button class="btn btn-outline" onclick="optimizeSetPreset('small')">Small (640px)</button>
                                <button class="btn btn-outline" onclick="optimizeSetPreset('medium')">Medium (800px)</button>
                                <button class="btn btn-outline" onclick="optimizeSetPreset('large')">Large (1200px)</button>
                            </div>
                        </div>

                        <div id="optimizeCustomSize" style="margin-bottom: 1rem;">
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="number" id="optimizeWidth" class="input-field" placeholder="Width" value="800">
                                <span></span>
                                <input type="number" id="optimizeHeight" class="input-field" placeholder="Height" value="600">
                            </div>
                            <label style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                                <input type="checkbox" id="optimizeKeepAspect" checked>
                                <span>Keep aspect ratio</span>
                            </label>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Quality</label>
                            <input type="range" id="optimizeQuality" class="input-field" min="1" max="100" value="85" oninput="optimizeUpdateQualityLabel()">
                            <span id="optimizeQualityValue">85%</span>
                        </div>

                        <button class="btn btn-primary" style="width: 100%;" onclick="optimizeProcess()">
                            <i class="fas fa-magic"></i> Optimize Image
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="optimizeDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="optimizeDownloadImage()">
                        <i class="fas fa-download"></i> Download Optimized Image
                    </button>
                    <button class="btn btn-outline" onclick="optimizeResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>

                <div class="progress-container" id="optimizeProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="optimizeProgressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="optimizeProgressText">Optimizing image...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- EXIF VIEWER PAGE (fully implemented) -->
        <div data-page="exif-viewer">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">EXIF Metadata Viewer</h1>
                    <p class="tool-description">View basic image information (EXIF extraction limited in browser).</p>
                </div>

                <div class="upload-area" id="exifUpload" onclick="document.getElementById('exifFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload images to view info</h3>
                    <p class="upload-subtitle">Upload multiple images to compare metadata</p>
                    <input type="file" id="exifFileInput" accept="image/*" multiple style="display: none;" onchange="exifHandleUpload(this.files)">
                </div>

                <div id="exifContainer" style="display: none;">
                    <div class="exif-container" id="exifGrid"></div>
                </div>

                <div id="noExifData" style="text-align: center; padding: 2rem; display: none;">
                    <i class="fas fa-info-circle" style="font-size: 3rem; color: var(--gray); margin-bottom: 1rem;"></i>
                    <h3 style="color: var(--gray);">No Image Data Found</h3>
                </div>
            </div>
        </div>

        <!-- ADD WATERMARK PAGE (fully implemented) -->
        <div data-page="add-watermark">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Add Watermark</h1>
                    <p class="tool-description">Protect your images with custom text watermarks.</p>
                </div>

                <div class="upload-area" id="watermarkUpload" onclick="document.getElementById('watermarkFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to watermark</h3>
                    <p class="upload-subtitle">Add text watermark</p>
                    <input type="file" id="watermarkFileInput" accept="image/*" style="display: none;" onchange="watermarkHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="watermarkPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalWatermarkImage" class="preview-image" src="" alt="Original">
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-copyright"></i> Watermarked</h4>
                        <img id="watermarkedImage" class="preview-image" src="" alt="Watermarked">
                    </div>
                </div>

                <div class="controls-grid" id="watermarkControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-copyright"></i>
                            <span>Watermark Settings</span>
                        </div>
                        
                        <div id="textWatermarkControls">
                            <div style="margin-bottom: 1rem;">
                                <label>Watermark Text</label>
                                <input type="text" id="watermarkText" class="input-field" value=" FastResizePro" oninput="watermarkUpdatePreview()">
                            </div>
                            
                            <div style="margin-bottom: 1rem;">
                                <label>Font Size</label>
                                <input type="range" id="watermarkFontSize" class="input-field" min="12" max="72" value="32" oninput="watermarkUpdatePreview()">
                                <span id="fontSizeValue">32px</span>
                            </div>
                            
                            <div style="margin-bottom: 1rem;">
                                <label>Color</label>
                                <input type="color" id="watermarkColor" value="#ffffff" onchange="watermarkUpdatePreview()">
                            </div>
                            
                            <div style="margin-bottom: 1rem;">
                                <label>Opacity</label>
                                <input type="range" id="watermarkOpacity" class="input-field" min="0" max="100" value="70" oninput="watermarkUpdatePreview()">
                                <span id="opacityValue">70%</span>
                            </div>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Position</label>
                            <select id="watermarkPosition" class="input-field" onchange="watermarkUpdatePreview()">
                                <option value="top-left">Top Left</option>
                                <option value="top-right">Top Right</option>
                                <option value="center" selected>Center</option>
                                <option value="bottom-left">Bottom Left</option>
                                <option value="bottom-right">Bottom Right</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Margin</label>
                            <input type="range" id="watermarkMargin" class="input-field" min="0" max="100" value="20" oninput="watermarkUpdatePreview()">
                            <span id="marginValue">20px</span>
                        </div>

                        <button class="btn btn-primary" style="width: 100%;" onclick="watermarkProcess()">
                            <i class="fas fa-copyright"></i> Apply Watermark
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="watermarkDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="watermarkDownloadImage()">
                        <i class="fas fa-download"></i> Download Watermarked Image
                    </button>
                    <button class="btn btn-outline" onclick="watermarkResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>
            </div>
        </div>

        <!-- UPSCALE IMAGE PAGE (fully implemented) -->
        <div data-page="upscale-image">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Image Upscaler</h1>
                    <p class="tool-description">Enlarge images with quality preservation.</p>
                </div>

                <div class="upload-area" id="upscaleUpload" onclick="document.getElementById('upscaleFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to upscale</h3>
                    <p class="upload-subtitle">2x, 3x, or 4x enlargement</p>
                    <input type="file" id="upscaleFileInput" accept="image/*" style="display: none;" onchange="upscaleHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="upscalePreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalUpscaleImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalUpscaleInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-expand"></i> Upscaled</h4>
                        <img id="upscaledImage" class="preview-image" src="" alt="Upscaled">
                        <div class="preview-info" id="upscaledInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="upscaleControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-expand"></i>
                            <span>Upscale Factor</span>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: center; margin-bottom: 1.5rem;">
                            <button class="btn btn-outline" onclick="upscaleSetFactor(2)">2x</button>
                            <button class="btn btn-outline" onclick="upscaleSetFactor(3)">3x</button>
                            <button class="btn btn-outline" onclick="upscaleSetFactor(4)">4x</button>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Enhancement</label>
                            <select id="upscaleEnhance" class="input-field">
                                <option value="standard">Standard</option>
                                <option value="smooth">Smooth</option>
                                <option value="sharp">Sharp</option>
                            </select>
                        </div>

                        <div style="background: var(--gray-light); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>Original Size:</span>
                                <span id="originalUpscaleDimensions">0  0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Upscaled Size:</span>
                                <span id="upscaledDimensions">0  0</span>
                            </div>
                        </div>

                        <button class="btn btn-primary" style="width: 100%;" onclick="upscaleProcess()">
                            <i class="fas fa-expand"></i> Upscale Image
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="upscaleDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="upscaleDownloadImage()">
                        <i class="fas fa-download"></i> Download Upscaled Image
                    </button>
                    <button class="btn btn-outline" onclick="upscaleResetTool()">
                        <i class="fas fa-redo"></i> Process Another
                    </button>
                </div>

                <div class="progress-container" id="upscaleProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="upscaleProgressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="upscaleProgressText">Upscaling image...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONVERT TO WEBP PAGE (fully implemented) -->
        <div data-page="convert-to-webp">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Convert to WebP</h1>
                    <p class="tool-description">Convert images to modern WebP format for better compression.</p>
                </div>

                <div class="upload-area" id="webpUpload" onclick="document.getElementById('webpFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload image to convert</h3>
                    <p class="upload-subtitle">Convert to WebP</p>
                    <input type="file" id="webpFileInput" accept="image/*" style="display: none;" onchange="webpHandleUpload(this.files)">
                </div>

                <div class="preview-section" id="webpPreview" style="display: none;">
                    <div class="preview-card">
                        <h4><i class="fas fa-original"></i> Original</h4>
                        <img id="originalWebPImage" class="preview-image" src="" alt="Original">
                        <div class="preview-info" id="originalWebPInfo"></div>
                    </div>
                    <div class="preview-card">
                        <h4><i class="fas fa-file-image"></i> Converted</h4>
                        <img id="convertedWebPImage" class="preview-image" src="" alt="Converted">
                        <div class="preview-info" id="convertedWebPInfo"></div>
                    </div>
                </div>

                <div class="controls-grid" id="webpControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-exchange-alt"></i>
                            <span>Conversion Settings</span>
                        </div>
                        
                        <div id="webpQualityControl" style="margin-bottom: 1rem;">
                            <label>Quality</label>
                            <input type="range" id="webpQuality" class="input-field" min="1" max="100" value="85" oninput="webpUpdateQualityLabel()">
                            <span id="webpQualityValue">85%</span>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Resize (Optional)</label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="webpResize" onchange="webpToggleResize()">
                                <span>Resize before conversion</span>
                            </label>
                        </div>

                        <div id="webpResizeControls" style="display: none; margin-bottom: 1rem;">
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="number" id="webpWidth" class="input-field" placeholder="Width">
                                <span></span>
                                <input type="number" id="webpHeight" class="input-field" placeholder="Height">
                            </div>
                            <label style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                                <input type="checkbox" id="webpKeepAspect" checked>
                                <span>Keep aspect ratio</span>
                            </label>
                        </div>

                        <button class="btn btn-primary" style="width: 100%;" onclick="webpProcessConversion()">
                            <i class="fas fa-exchange-alt"></i> Convert & Download
                        </button>
                    </div>
                </div>

                <div class="btn-group" id="webpDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="webpDownloadImage()">
                        <i class="fas fa-download"></i> Download Converted Image
                    </button>
                    <button class="btn btn-outline" onclick="webpResetTool()">
                        <i class="fas fa-redo"></i> Convert Another
                    </button>
                </div>

                <div class="progress-container" id="webpProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="webpProgressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="webpProgressText">Converting image...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- BATCH RESIZE PAGE (fully implemented) -->
        <div data-page="batch-resize">
            <div class="tool-container">
                <div class="tool-header">
                    <h1 class="tool-title">Batch Resize</h1>
                    <p class="tool-description">Resize multiple images at once. Download as ZIP.</p>
                </div>

                <div class="upload-area" id="batchUpload" onclick="document.getElementById('batchFileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3 class="upload-title">Upload multiple images</h3>
                    <p class="upload-subtitle">Select multiple files or drag & drop</p>
                    <input type="file" id="batchFileInput" accept="image/*" multiple style="display: none;" onchange="batchHandleUpload(this.files)">
                </div>

                <div id="batchFileList" style="display: none; margin-bottom: 1.5rem;">
                    <h4 style="margin-bottom: 1rem;">Selected Files</h4>
                    <div id="batchFileItems" style="max-height: 200px; overflow-y: auto; border: 2px solid var(--gray-light); border-radius: 12px; padding: 0.5rem;"></div>
                </div>

                <div class="controls-grid" id="batchControls" style="display: none;">
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-layer-group"></i>
                            <span>Batch Settings</span>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <label>Resize Mode</label>
                            <select id="batchResizeMode" class="input-field" onchange="batchUpdateMode()">
                                <option value="percentage">Percentage</option>
                                <option value="width">Fit to Width</option>
                                <option value="height">Fit to Height</option>
                            </select>
                        </div>

                        <div id="batchPercentageControl">
                            <label>Percentage</label>
                            <input type="range" id="batchPercentage" class="input-field" min="1" max="200" value="100" oninput="batchUpdatePercentageLabel()">
                            <span id="batchPercentageValue">100%</span>
                        </div>

                        <div id="batchDimensionsControl" style="display: none;">
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="number" id="batchWidth" class="input-field" placeholder="Width" value="800">
                            </div>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label>Quality</label>
                            <input type="range" id="batchQuality" class="input-field" min="1" max="100" value="85" oninput="batchUpdateQualityLabel()">
                            <span id="batchQualityValue">85%</span>
                        </div>

                        <button class="btn btn-primary" style="width: 100%;" onclick="batchProcess()">
                            <i class="fas fa-layer-group"></i> Process Batch
                        </button>
                    </div>
                </div>

                <div class="progress-container" id="batchProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="batchProgressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="batchProgressText">0/0 files processed</span>
                        <span id="batchProgressPercent">0%</span>
                    </div>
                </div>

                <div class="btn-group" id="batchDownloadBtn" style="display: none;">
                    <button class="btn btn-success" onclick="batchDownloadZip()">
                        <i class="fas fa-file-archive"></i> Download All as ZIP
                    </button>
                    <button class="btn btn-outline" onclick="batchResetTool()">
                        <i class="fas fa-redo"></i> Process More
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --------------------------------------------------------------
        // GLOBAL UTILITIES
        // --------------------------------------------------------------
        function toggleDropdown(id) {
            document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        document.addEventListener('click', (e) => { if (!e.target.closest('.dropdown')) document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active')); });

        const searchTools = [
            { name: 'Resize by Percentage', url: 'resize-percentage', icon: 'fa-percent', category: 'Resize' },
            { name: 'Advanced Resize + Aspect', url: 'resize-aspect-ratio', icon: 'fa-arrows-alt', category: 'Resize' },
            { name: 'Resize with DPI', url: 'resize-dimensions', icon: 'fa-ruler', category: 'Resize' },
            { name: 'Compress Image', url: 'compress-image', icon: 'fa-compress', category: 'Compress' },
            { name: 'Optimize Image', url: 'optimize-image', icon: 'fa-magic', category: 'Optimize' },
            { name: 'Resize to KB', url: 'resize-to-kb', icon: 'fa-file', category: 'Compress' },
            { name: 'Crop Image', url: 'crop-image', icon: 'fa-crop', category: 'Crop' },
            { name: 'Rotate Image', url: 'rotate-image', icon: 'fa-undo-alt', category: 'Transform' },
            { name: 'Mirror Image', url: 'mirror-image', icon: 'fa-arrows-alt-h', category: 'Transform' },
            { name: 'Pixelate Image', url: 'pixelate-image', icon: 'fa-th', category: 'Effects' },
            { name: 'Social Media Resizer', url: 'social-media-resizer', icon: 'fa-share-alt', category: 'Social' },
            { name: 'Print Resize', url: 'print-resize', icon: 'fa-print', category: 'Print' },
            { name: 'Dimension Calculator', url: 'dimension-calculator', icon: 'fa-calculator', category: 'Tools' },
            { name: 'EXIF Viewer', url: 'exif-viewer', icon: 'fa-info-circle', category: 'Metadata' },
            { name: 'Add Watermark', url: 'add-watermark', icon: 'fa-copyright', category: 'Protect' },
            { name: 'Upscale Image', url: 'upscale-image', icon: 'fa-expand', category: 'Resize' },
            { name: 'Convert to WebP', url: 'convert-to-webp', icon: 'fa-file-image', category: 'Convert' },
            { name: 'Batch Resize', url: 'batch-resize', icon: 'fa-layer-group', category: 'Batch' }
        ];
        document.getElementById('globalSearch').addEventListener('input', function(e) {
            const q = e.target.value.toLowerCase();
            const r = document.getElementById('searchResults');
            if (q.length < 2) { r.classList.remove('active'); return; }
            const m = searchTools.filter(t => t.name.toLowerCase().includes(q) || t.category.toLowerCase().includes(q)).slice(0,10);
            r.innerHTML = m.length ? m.map(t => `<div class="search-result-item" onclick="showPage('${t.url}')"><i class="fas ${t.icon}"></i><div><strong>${t.name}</strong><small style="display:block;color:var(--gray);">${t.category}</small></div></div>`).join('') : '<div class="search-result-item">No tools found</div>';
            r.classList.add('active');
        });
        document.addEventListener('click', (e) => { if (!e.target.closest('.search-container')) document.getElementById('searchResults').classList.remove('active'); });

        function showPage(id) {
            document.querySelectorAll('[data-page]').forEach(p => p.classList.remove('active'));
            document.querySelector(`[data-page="${id}"]`).classList.add('active');
            const names = { home:'Dashboard', 'resize-percentage':'Resize by Percentage','resize-aspect-ratio':'Advanced Resize + Aspect','compress-image':'Compress Image','mirror-image':'Mirror Image','pixelate-image':'Pixelate Image','rotate-image':'Rotate Image','social-media-resizer':'Social Media Resizer','resize-to-kb':'Resize to KB','print-resize':'Print Resize','resize-dimensions':'Resize with DPI','dimension-calculator':'Dimension Calculator','crop-image':'Crop Image','optimize-image':'Optimize Image','exif-viewer':'EXIF Viewer','add-watermark':'Add Watermark','upscale-image':'Image Upscaler','convert-to-webp':'Convert to WebP','batch-resize':'Batch Resize' };
            document.getElementById('currentPageName').textContent = names[id] || id;
            document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
            document.getElementById('globalSearch').value = ''; document.getElementById('searchResults').classList.remove('active');
        }

        function showToast(msg, type='success') {
            const t = document.createElement('div'); t.className = `toast ${type}`;
            t.innerHTML = `<i class="fas ${type==='error'?'fa-exclamation-circle':type==='warning'?'fa-exclamation-triangle':'fa-check-circle'}"></i><span>${msg}</span>`;
            document.getElementById('toastContainer').appendChild(t);
            setTimeout(() => { t.style.animation = 'slideIn 0.3s reverse'; setTimeout(() => t.remove(), 300); }, 3000);
        }
        function formatFileSize(b) { if (b===0) return '0 Bytes'; const k=1024, s=['Bytes','KB','MB','GB'], i=Math.floor(Math.log(b)/Math.log(k)); return parseFloat((b/Math.pow(k,i)).toFixed(2))+' '+s[i]; }

        // --------------------------------------------------------------
        // RESIZE PERCENTAGE (REAL)
        // --------------------------------------------------------------
        let percentageImg = null, percentageBlob = null, percentageFileName = '';
        window.percentageHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; percentageFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                percentageImg = new Image(); percentageImg.onload = () => {
                    document.getElementById('originalPercentageImage').src = e.target.result;
                    document.getElementById('percentagePreview').style.display = 'grid';
                    document.getElementById('percentageControls').style.display = 'block';
                    document.getElementById('percentageActions').style.display = 'flex';
                    document.getElementById('percentageWidth').value = percentageImg.width;
                    document.getElementById('percentageHeight').value = percentageImg.height;
                    document.getElementById('originalPercentageInfo').innerHTML = `<strong>Dimensions:</strong> ${percentageImg.width}${percentageImg.height}<br><strong>File Size:</strong> ${formatFileSize(f.size)}<br><strong>Format:</strong> ${f.type}`;
                    percentageUpdatePreview();
                }; percentageImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.percentageUpdateSlider = function() { document.getElementById('percentageSlider').value = document.getElementById('percentageValue').value; percentageUpdatePreview(); };
        window.percentageUpdatePreview = function() {
            if (!percentageImg) return;
            const p = parseInt(document.getElementById('percentageSlider').value); document.getElementById('percentageValue').value = p;
            let w = percentageImg.width, h = percentageImg.height;
            if (document.getElementById('keepAspectPercentage').checked) { w = Math.round(percentageImg.width * p/100); h = Math.round(percentageImg.height * p/100); }
            document.getElementById('percentageWidth').value = w; document.getElementById('percentageHeight').value = h;
            const c = document.createElement('canvas'); c.width = w; c.height = h;
            c.getContext('2d').drawImage(percentageImg, 0, 0, w, h);
            document.getElementById('resizedPercentageImage').src = c.toDataURL('image/jpeg',0.9);
            document.getElementById('resizedPercentageInfo').innerHTML = `<strong>Dimensions:</strong> ${w}${h}<br><strong>Scale:</strong> ${p}%`;
        };
        window.percentageProcessResize = function() {
            if (!percentageImg) return; const w = parseInt(document.getElementById('percentageWidth').value), h = parseInt(document.getElementById('percentageHeight').value);
            const c = document.createElement('canvas'); c.width = w; c.height = h;
            c.getContext('2d').drawImage(percentageImg, 0, 0, w, h);
            document.getElementById('percentageProgress').classList.add('active'); let prog = 0;
            const iv = setInterval(() => { prog+=10; document.getElementById('percentageProgressFill').style.width = prog+'%'; document.getElementById('percentageProgressText').textContent = prog+'% Complete';
                if (prog>=100) { clearInterval(iv);
                    c.toBlob(b => { percentageBlob = b; document.getElementById('downloadPercentageBtn').style.display = 'block'; document.getElementById('percentageProgress').classList.remove('active'); showToast('Resized!','success'); }, 'image/jpeg',0.9);
                } }, 50);
        };
        window.percentageDownloadImage = function() { if (percentageBlob) { const u = URL.createObjectURL(percentageBlob), a = document.createElement('a'); a.href = u; a.download = 'resized_'+percentageFileName; a.click(); URL.revokeObjectURL(u); showToast('Download started'); } };
        window.percentageResetTool = function() { document.getElementById('percentageFileInput').value=''; document.getElementById('percentagePreview').style.display='none'; document.getElementById('percentageControls').style.display='none'; document.getElementById('percentageActions').style.display='none'; document.getElementById('downloadPercentageBtn').style.display='none'; document.getElementById('percentageProgress').classList.remove('active'); percentageImg=null; percentageBlob=null; };

        // --------------------------------------------------------------
        // ASPECT RATIO (REAL)
        // --------------------------------------------------------------
        let aspectImg = null, aspectBlob = null, aspectFileName = '';
        window.aspectHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; aspectFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                aspectImg = new Image(); aspectImg.onload = () => {
                    document.getElementById('originalAspectImage').src = e.target.result;
                    document.getElementById('aspectPreview').style.display = 'grid';
                    document.getElementById('aspectControls').style.display = 'block';
                    document.getElementById('aspectWidth').value = aspectImg.width; document.getElementById('aspectHeight').value = aspectImg.height;
                    aspectLoadPresets(); aspectDrawGrid(); aspectUpdateCrop();
                }; aspectImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.aspectDrawGrid = function() {
            if (!aspectImg) return; const cv = document.getElementById('gridOverlay'); cv.width = aspectImg.width; cv.height = aspectImg.height;
            const ctx = cv.getContext('2d'); ctx.strokeStyle = 'rgba(37,99,235,0.5)'; ctx.lineWidth=2;
            const tw = cv.width/3, th = cv.height/3;
            ctx.beginPath(); ctx.moveTo(tw,0); ctx.lineTo(tw,cv.height); ctx.moveTo(tw*2,0); ctx.lineTo(tw*2,cv.height);
            ctx.moveTo(0,th); ctx.lineTo(cv.width,th); ctx.moveTo(0,th*2); ctx.lineTo(cv.width,th*2); ctx.stroke();
            ctx.strokeStyle = 'rgba(255,0,0,0.5)'; ctx.beginPath(); ctx.moveTo(cv.width/2,0); ctx.lineTo(cv.width/2,cv.height); ctx.moveTo(0,cv.height/2); ctx.lineTo(cv.width,cv.height/2); ctx.stroke();
        };
        window.aspectLoadPresets = function() {
            const cat = document.getElementById('aspectRatioCategory').value; const g = document.getElementById('aspectPresetGrid');
            let p = []; if (cat==='standard') p = ['1x1','2x1','3x2','4x3','5x4','16x9']; else if (cat==='social') p = ['instagram-story','pinterest','facebook-cover']; else if (cat==='print') p = ['4x6','5x7','8x10','11x14']; else p = ['a4','a3','a5'];
            g.innerHTML = p.map(pr => `<div class="aspect-btn" onclick="aspectSelectPreset('${pr}')">${pr.toUpperCase()}</div>`).join('');
        };
        window.aspectSelectPreset = function(p) {
            document.querySelectorAll('.aspect-btn').forEach(b=>b.classList.remove('active')); event.target.classList.add('active');
            let ratio = 1; if (p==='1x1') ratio=1; else if (p==='2x1') ratio=2; else if (p==='3x2') ratio=1.5; else if (p==='4x3') ratio=1.333; else if (p==='5x4') ratio=1.25; else if (p==='16x9') ratio=1.778; else if (p==='instagram-story') ratio=9/16; else if (p==='pinterest') ratio=2/3; else if (p==='facebook-cover') ratio=1.78; else if (p==='4x6') ratio=4/6; else if (p==='5x7') ratio=5/7; else if (p==='8x10') ratio=0.8; else if (p==='11x14') ratio=0.785; else if (p==='a4') ratio=0.707; else if (p==='a3') ratio=0.707; else if (p==='a5') ratio=0.707;
            if (aspectImg) { let w,h; if (ratio>=1) { w = aspectImg.width; h = Math.round(w/ratio); } else { h = aspectImg.height; w = Math.round(h*ratio); }
                document.getElementById('aspectWidth').value = w; document.getElementById('aspectHeight').value = h; aspectUpdateCrop(); }
        };
        window.aspectUpdateCrop = function() {
            if (!aspectImg) return; const w = parseInt(document.getElementById('aspectWidth').value), h = parseInt(document.getElementById('aspectHeight').value);
            const fit = document.getElementById('fitMode').checked, fill = document.getElementById('fillMode').checked;
            const c = document.createElement('canvas'); c.width = w; c.height = h; const ctx = c.getContext('2d');
            if (fit) { ctx.fillStyle='white'; ctx.fillRect(0,0,w,h); const s = Math.min(w/aspectImg.width, h/aspectImg.height); ctx.drawImage(aspectImg, (w-aspectImg.width*s)/2, (h-aspectImg.height*s)/2, aspectImg.width*s, aspectImg.height*s); }
            else if (fill) { const s = Math.max(w/aspectImg.width, h/aspectImg.height); ctx.drawImage(aspectImg, (w-aspectImg.width*s)/2, (h-aspectImg.height*s)/2, aspectImg.width*s, aspectImg.height*s); }
            else { ctx.drawImage(aspectImg,0,0,w,h); }
            document.getElementById('resizedAspectImage').src = c.toDataURL('image/jpeg',0.9);
            c.toBlob(b => aspectBlob = b, 'image/jpeg',0.9);
        };
        window.aspectProcessResize = function() { aspectUpdateCrop(); document.getElementById('aspectDownloadBtn').style.display = 'flex'; showToast('Cropped & resized!','success'); };
        window.aspectDownloadImage = function() { if (aspectBlob) { const u = URL.createObjectURL(aspectBlob), a = document.createElement('a'); a.href = u; a.download = 'cropped_'+aspectFileName; a.click(); URL.revokeObjectURL(u); showToast('Download started'); } };
        window.aspectResetTool = function() { document.getElementById('aspectFileInput').value=''; document.getElementById('aspectPreview').style.display='none'; document.getElementById('aspectControls').style.display='none'; document.getElementById('aspectDownloadBtn').style.display='none'; aspectImg=null; aspectBlob=null; };

        // --------------------------------------------------------------
        // COMPRESS (REAL)
        // --------------------------------------------------------------
        let compressImg = null, compressBlob = null, compressFileName = '', compressOriginalSize = 0;
        window.compressHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; compressFileName = f.name; compressOriginalSize = f.size;
            const r = new FileReader(); r.onload = (e) => {
                compressImg = new Image(); compressImg.onload = () => {
                    document.getElementById('originalCompressImage').src = e.target.result;
                    document.getElementById('compressPreview').style.display = 'grid';
                    document.getElementById('compressControls').style.display = 'block';
                    document.getElementById('compressActions').style.display = 'flex';
                    document.getElementById('originalCompressInfo').innerHTML = `<strong>Dimensions:</strong> ${compressImg.width}${compressImg.height}<br><strong>File Size:</strong> ${formatFileSize(f.size)}`;
                }; compressImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.compressToggleMethod = function() {
            const m = document.querySelector('input[name="compressMethod"]:checked').value;
            document.getElementById('autoCompressControls').style.display = m==='auto'?'block':'none';
            document.getElementById('manualCompressControls').style.display = m==='manual'?'block':'none';
        };
        window.compressUpdateQualityLabel = function() { document.getElementById('compressQualityValue').textContent = document.getElementById('compressQuality').value+'%'; };
        window.compressUpdateTargetLabel = function() { const v = document.getElementById('targetSizeSlider').value; document.getElementById('targetSizeValue').value = v; document.getElementById('targetSizeLabel').textContent = v+' KB'; };
        window.compressUpdateTargetSlider = function() { const v = document.getElementById('targetSizeValue').value; document.getElementById('targetSizeSlider').value = v; document.getElementById('targetSizeLabel').textContent = v+' KB'; };
        window.compressProcess = function() {
            if (!compressImg) return; const m = document.querySelector('input[name="compressMethod"]:checked').value;
            document.getElementById('compressProgress').classList.add('active');
            let q = m==='auto' ? parseInt(document.getElementById('compressQuality').value)/100 : 0.6;
            const c = document.createElement('canvas'); c.width = compressImg.width; c.height = compressImg.height;
            c.getContext('2d').drawImage(compressImg,0,0);
            let prog=0; const iv = setInterval(()=>{ prog+=10; document.getElementById('compressProgressFill').style.width=prog+'%'; document.getElementById('compressProgressText').textContent=prog+'%';
                if (prog>=100) { clearInterval(iv);
                    c.toBlob(b => { compressBlob = b; const u = URL.createObjectURL(b); document.getElementById('compressedImage').src = u;
                        document.getElementById('compressedInfo').innerHTML = `<strong>Dimensions:</strong> ${c.width}${c.height}<br><strong>File Size:</strong> ${formatFileSize(b.size)}<br><strong>Reduction:</strong> ${Math.round((1-b.size/compressOriginalSize)*100)}%`;
                        document.getElementById('downloadCompressedBtn').style.display='block'; document.getElementById('compressProgress').classList.remove('active'); showToast(`Compressed to ${formatFileSize(b.size)}`,'success');
                    }, 'image/jpeg', q);
                } }, 50);
        };
        window.compressDownloadImage = function() { if (compressBlob) { const u = URL.createObjectURL(compressBlob), a = document.createElement('a'); a.href = u; a.download = 'compressed_'+compressFileName; a.click(); URL.revokeObjectURL(u); } };
        window.compressResetTool = function() { document.getElementById('compressFileInput').value=''; document.getElementById('compressPreview').style.display='none'; document.getElementById('compressControls').style.display='none'; document.getElementById('compressActions').style.display='none'; document.getElementById('downloadCompressedBtn').style.display='none'; document.getElementById('compressProgress').classList.remove('active'); compressImg=null; compressBlob=null; };

        // --------------------------------------------------------------
        // MIRROR (REAL)
        // --------------------------------------------------------------
        let mirrorImg = null, mirrorBlob = null, mirrorFileName = '';
        window.mirrorHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; mirrorFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                mirrorImg = new Image(); mirrorImg.onload = () => {
                    document.getElementById('originalMirrorImage').src = e.target.result;
                    document.getElementById('mirrorPreview').style.display = 'grid';
                    document.getElementById('mirrorControls').style.display = 'flex';
                    document.getElementById('mirrorDownloadBtn').style.display = 'none';
                }; mirrorImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.mirrorApply = function(dir) {
            if (!mirrorImg) return; const c = document.createElement('canvas'); c.width = mirrorImg.width; c.height = mirrorImg.height; const ctx = c.getContext('2d');
            if (dir==='horizontal') { ctx.translate(c.width,0); ctx.scale(-1,1); } else { ctx.translate(0,c.height); ctx.scale(1,-1); }
            ctx.drawImage(mirrorImg,0,0);
            c.toBlob(b => { mirrorBlob = b; const u = URL.createObjectURL(b); document.getElementById('mirroredImage').src = u; document.getElementById('mirrorDownloadBtn').style.display = 'flex'; showToast('Mirrored!','success'); }, 'image/jpeg',0.9);
        };
        window.mirrorDownloadImage = function() { if (mirrorBlob) { const u = URL.createObjectURL(mirrorBlob), a = document.createElement('a'); a.href = u; a.download = 'mirrored_'+mirrorFileName; a.click(); URL.revokeObjectURL(u); } };
        window.mirrorResetTool = function() { document.getElementById('mirrorFileInput').value=''; document.getElementById('mirrorPreview').style.display='none'; document.getElementById('mirrorControls').style.display='none'; document.getElementById('mirrorDownloadBtn').style.display='none'; mirrorImg=null; mirrorBlob=null; };

        // --------------------------------------------------------------
        // PIXELATE (REAL)
        // --------------------------------------------------------------
        let pixelateImg = null, pixelateBlob = null, pixelateFileName = '';
        window.pixelateHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; pixelateFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                pixelateImg = new Image(); pixelateImg.onload = () => {
                    document.getElementById('originalPixelateImage').src = e.target.result;
                    document.getElementById('pixelatePreview').style.display = 'grid';
                    document.getElementById('pixelateControls').style.display = 'block';
                    document.getElementById('pixelateDownloadBtn').style.display = 'none';
                }; pixelateImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.pixelateUpdatePreview = function() {
            if (!pixelateImg) return; const lvl = parseInt(document.getElementById('pixelateLevel').value); document.getElementById('pixelateLevelValue').textContent = lvl+'px';
            const c = document.createElement('canvas'); c.width = pixelateImg.width; c.height = pixelateImg.height;
            const s = document.createElement('canvas'); s.width = Math.max(1, Math.floor(pixelateImg.width/lvl)); s.height = Math.max(1, Math.floor(pixelateImg.height/lvl));
            const sCtx = s.getContext('2d'); sCtx.drawImage(pixelateImg,0,0,s.width,s.height);
            if (document.getElementById('blackWhiteMode').checked) { const id = sCtx.getImageData(0,0,s.width,s.height); for (let i=0;i<id.data.length;i+=4) { const g = (id.data[i]+id.data[i+1]+id.data[i+2])/3; id.data[i]=g; id.data[i+1]=g; id.data[i+2]=g; } sCtx.putImageData(id,0,0); }
            c.getContext('2d', {imageSmoothingEnabled:false}).drawImage(s,0,0,c.width,c.height);
            c.toBlob(b => { pixelateBlob = b; const u = URL.createObjectURL(b); document.getElementById('pixelatedImage').src = u; }, 'image/jpeg',0.9);
        };
        window.pixelateApplyEffect = function() { pixelateUpdatePreview(); document.getElementById('pixelateDownloadBtn').style.display = 'flex'; showToast('Pixelated!','success'); };
        window.pixelateDownloadImage = function() { if (pixelateBlob) { const u = URL.createObjectURL(pixelateBlob), a = document.createElement('a'); a.href = u; a.download = 'pixelated_'+pixelateFileName; a.click(); URL.revokeObjectURL(u); } };
        window.pixelateResetTool = function() { document.getElementById('pixelateFileInput').value=''; document.getElementById('pixelatePreview').style.display='none'; document.getElementById('pixelateControls').style.display='none'; document.getElementById('pixelateDownloadBtn').style.display='none'; pixelateImg=null; pixelateBlob=null; };

        // --------------------------------------------------------------
        // ROTATE (REAL)
        // --------------------------------------------------------------
        let rotateImg = null, rotateBlob = null, rotateFileName = '';
        window.rotateHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; rotateFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                rotateImg = new Image(); rotateImg.onload = () => {
                    document.getElementById('originalRotateImage').src = e.target.result;
                    document.getElementById('rotatePreview').style.display = 'grid';
                    document.getElementById('rotateControls').style.display = 'block';
                    document.getElementById('rotateDownloadBtn').style.display = 'none';
                }; rotateImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.rotateUpdateAngleLabel = function() { const a = document.getElementById('customAngle').value; document.getElementById('angleValue').value = a; document.getElementById('angleLabel').textContent = a+''; };
        window.rotateUpdateAngleSlider = function() { const a = document.getElementById('angleValue').value; document.getElementById('customAngle').value = a; document.getElementById('angleLabel').textContent = a+''; };
        window.rotateApply = function(angle) {
            if (!rotateImg) return; const rad = angle * Math.PI/180; const c = document.createElement('canvas');
            if (angle%180!==0) { c.width = rotateImg.height; c.height = rotateImg.width; } else { c.width = rotateImg.width; c.height = rotateImg.height; }
            const ctx = c.getContext('2d'); ctx.translate(c.width/2,c.height/2); ctx.rotate(rad); ctx.drawImage(rotateImg, -rotateImg.width/2, -rotateImg.height/2);
            c.toBlob(b => { rotateBlob = b; const u = URL.createObjectURL(b); document.getElementById('rotatedImage').src = u; document.getElementById('rotateDownloadBtn').style.display = 'flex'; showToast(`Rotated ${angle}`,'success'); }, 'image/jpeg',0.9);
        };
        window.rotateApplyCustom = function() { rotateApply(parseInt(document.getElementById('customAngle').value)); };
        window.rotateDownloadImage = function() { if (rotateBlob) { const u = URL.createObjectURL(rotateBlob), a = document.createElement('a'); a.href = u; a.download = 'rotated_'+rotateFileName; a.click(); URL.revokeObjectURL(u); } };
        window.rotateResetTool = function() { document.getElementById('rotateFileInput').value=''; document.getElementById('rotatePreview').style.display='none'; document.getElementById('rotateControls').style.display='none'; document.getElementById('rotateDownloadBtn').style.display='none'; rotateImg=null; rotateBlob=null; };

        // --------------------------------------------------------------
        // SOCIAL MEDIA (REAL)
        // --------------------------------------------------------------
        let socialImg = null, socialBlob = null, socialFileName = '';
        window.socialHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; socialFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                socialImg = new Image(); socialImg.onload = () => {
                    document.getElementById('originalSocialImage').src = e.target.result;
                    document.getElementById('socialPreview').style.display = 'grid';
                    document.getElementById('socialControls').style.display = 'block';
                    document.getElementById('originalSocialInfo').innerHTML = `<strong>Dimensions:</strong> ${socialImg.width}${socialImg.height}<br><strong>Aspect:</strong> ${(socialImg.width/socialImg.height).toFixed(2)}`;
                    socialUpdatePreset();
                }; socialImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.socialUpdatePreset = function() {
            const p = document.getElementById('socialPlatform').value; let w=1080,h=1080;
            if (p==='ig-post') { w=1080;h=1080; } else if (p==='ig-portrait') { w=1080;h=1350; } else if (p==='ig-landscape') { w=1080;h=566; } else if (p==='ig-story') { w=1080;h=1920; } else if (p==='ig-profile') { w=320;h=320; } else if (p==='fb-post') { w=1200;h=630; } else if (p==='fb-cover') { w=820;h=462; } else if (p==='fb-profile') { w=180;h=180; } else if (p==='tw-post') { w=1200;h=675; } else if (p==='tw-header') { w=1500;h=500; } else if (p==='tw-profile') { w=400;h=400; } else if (p==='li-post') { w=1200;h=627; } else if (p==='li-cover') { w=1584;h=396; } else if (p==='li-profile') { w=400;h=400; } else if (p==='pin-pin') { w=1000;h=1500; } else if (p==='pin-profile') { w=165;h=165; } else if (p==='yt-thumbnail') { w=1280;h=720; } else if (p==='yt-cover') { w=2560;h=1440; } else if (p==='yt-profile') { w=800;h=800; }
            document.getElementById('socialWidth').value = w; document.getElementById('socialHeight').value = h;
        };
        window.socialProcessResize = function() {
            if (!socialImg) return; const w = parseInt(document.getElementById('socialWidth').value), h = parseInt(document.getElementById('socialHeight').value);
            const type = document.getElementById('resizeType').value; const c = document.createElement('canvas'); c.width = w; c.height = h; const ctx = c.getContext('2d');
            if (type==='fit') { const s = Math.min(w/socialImg.width, h/socialImg.height); ctx.drawImage(socialImg, (w-socialImg.width*s)/2, (h-socialImg.height*s)/2, socialImg.width*s, socialImg.height*s); }
            else if (type==='fill') { const s = Math.max(w/socialImg.width, h/socialImg.height); ctx.drawImage(socialImg, (w-socialImg.width*s)/2, (h-socialImg.height*s)/2, socialImg.width*s, socialImg.height*s); }
            else { ctx.drawImage(socialImg,0,0,w,h); }
            c.toBlob(b => { socialBlob = b; const u = URL.createObjectURL(b); document.getElementById('socialResizedImage').src = u;
                document.getElementById('socialResizedInfo').innerHTML = `<strong>Dimensions:</strong> ${w}${h}<br><strong>File Size:</strong> ${formatFileSize(b.size)}<br><strong>Ready</strong>`;
                document.getElementById('socialDownloadBtn').style.display = 'flex'; showToast('Resized for social','success'); }, 'image/jpeg',0.9);
        };
        window.socialDownloadImage = function() { if (socialBlob) { const u = URL.createObjectURL(socialBlob), a = document.createElement('a'); a.href = u; a.download = 'social_'+socialFileName; a.click(); URL.revokeObjectURL(u); } };
        window.socialResetTool = function() { document.getElementById('socialFileInput').value=''; document.getElementById('socialPreview').style.display='none'; document.getElementById('socialControls').style.display='none'; document.getElementById('socialDownloadBtn').style.display='none'; socialImg=null; socialBlob=null; };

        // --------------------------------------------------------------
        // RESIZE TO KB (REAL)  binary search
        // --------------------------------------------------------------
        let kbImg = null, kbBlob = null, kbFileName = '', kbOriginalSize = 0;
        window.kbHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; kbFileName = f.name; kbOriginalSize = f.size;
            const r = new FileReader(); r.onload = (e) => {
                kbImg = new Image(); kbImg.onload = () => {
                    document.getElementById('originalKBImage').src = e.target.result;
                    document.getElementById('kbPreview').style.display = 'grid';
                    document.getElementById('kbControls').style.display = 'block';
                    document.getElementById('originalKBInfo').innerHTML = `<strong>Dimensions:</strong> ${kbImg.width}${kbImg.height}<br><strong>File Size:</strong> ${formatFileSize(f.size)}`;
                }; kbImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.kbUpdatePreset = function() { document.getElementById('customKBSize').style.display = document.getElementById('kbPreset').value==='custom'?'block':'none'; };
        window.kbProcessResize = async function() {
            if (!kbImg) return; let targetKB = parseInt(document.getElementById('kbPreset').value);
            if (targetKB === 'custom') { const v = parseInt(document.getElementById('customKBValue').value)||100; targetKB = document.getElementById('customKBUnit').value==='MB' ? v*1024 : v; }
            const targetBytes = targetKB * 1024; document.getElementById('kbProgress').classList.add('active');
            const c = document.createElement('canvas'); c.width = kbImg.width; c.height = kbImg.height;
            c.getContext('2d').drawImage(kbImg,0,0);
            let low = 0.1, high = 0.95, bestBlob = null, bestSize = Infinity;
            for (let i=0;i<8;i++) { const q = (low+high)/2;
                const blob = await new Promise(r => c.toBlob(r, 'image/jpeg', q));
                const prog = (i+1)*12.5; document.getElementById('kbProgressFill').style.width = prog+'%'; document.getElementById('kbProgressText').textContent = `Optimizing... ${Math.round(prog)}%`;
                if (Math.abs(blob.size - targetBytes) < 2048) { bestBlob = blob; break; }
                if (blob.size > targetBytes) high = q; else { low = q; bestBlob = blob; } }
            document.getElementById('kbProgress').classList.remove('active');
            if (bestBlob) { kbBlob = bestBlob; const u = URL.createObjectURL(bestBlob); document.getElementById('resizedKBImage').src = u;
                document.getElementById('resizedKBInfo').innerHTML = `<strong>Dimensions:</strong> ${c.width}${c.height}<br><strong>File Size:</strong> ${formatFileSize(bestBlob.size)}<br><strong>Target:</strong> ${targetKB} KB`;
                document.getElementById('kbDownloadBtn').style.display = 'flex'; showToast(`Optimized to ${formatFileSize(bestBlob.size)}`,'success'); }
        };
        window.kbDownloadImage = function() { if (kbBlob) { const u = URL.createObjectURL(kbBlob), a = document.createElement('a'); a.href = u; a.download = 'optimized_'+kbFileName; a.click(); URL.revokeObjectURL(u); } };
        window.kbResetTool = function() { document.getElementById('kbFileInput').value=''; document.getElementById('kbPreview').style.display='none'; document.getElementById('kbControls').style.display='none'; document.getElementById('kbDownloadBtn').style.display='none'; document.getElementById('kbProgress').classList.remove('active'); kbImg=null; kbBlob=null; };

        // --------------------------------------------------------------
        // PRINT (REAL)
        // --------------------------------------------------------------
        let printImg = null, printBlob = null, printFileName = '';
        window.printHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; printFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                printImg = new Image(); printImg.onload = () => {
                    document.getElementById('originalPrintImage').src = e.target.result;
                    document.getElementById('printPreview').style.display = 'grid';
                    document.getElementById('printControls').style.display = 'block';
                    document.getElementById('originalPrintInfo').innerHTML = `<strong>Dimensions:</strong> ${printImg.width}${printImg.height} px<br><strong>File Size:</strong> ${formatFileSize(f.size)}`;
                    printApplyPreset();
                }; printImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.printUpdateUnit = function() { printApplyPreset(); };
        window.printApplyPreset = function() {
            const p = document.getElementById('printPreset').value; const u = document.getElementById('printUnit').value;
            document.getElementById('customPrintSize').style.display = p==='custom'?'block':'none';
            if (p==='custom') return; let w=8.5,h=11;
            if (p==='letter') { w=8.5;h=11; } else if (p==='legal') { w=8.5;h=14; } else if (p==='tabloid') { w=11;h=17; } else if (p==='4x6') { w=4;h=6; } else if (p==='5x7') { w=5;h=7; } else if (p==='8x10') { w=8;h=10; } else if (p==='11x14') { w=11;h=14; } else if (p==='16x20') { w=16;h=20; } else if (p==='20x30') { w=20;h=30; } else if (p==='a4') { w=8.3;h=11.7; } else if (p==='a3') { w=11.7;h=16.5; } else if (p==='a5') { w=5.8;h=8.3; }
            if (u==='cm') { w*=2.54; h*=2.54; } else if (u==='mm') { w*=25.4; h*=25.4; }
            document.getElementById('printWidth').value = w.toFixed(2); document.getElementById('printHeight').value = h.toFixed(2);
            printUpdateDPI();
        };
        window.printUpdateDPI = function() {
            const dpi = parseInt(document.getElementById('printDPI').value), u = document.getElementById('printUnit').value;
            let w = parseFloat(document.getElementById('printWidth').value)||0, h = parseFloat(document.getElementById('printHeight').value)||0;
            let win = w, hin = h; if (u==='cm') { win/=2.54; hin/=2.54; } else if (u==='mm') { win/=25.4; hin/=25.4; }
            const pxW = Math.round(win*dpi), pxH = Math.round(hin*dpi);
            document.getElementById('printSizeDisplay').textContent = `${w}${h} ${u}`;
            document.getElementById('pixelSizeDisplay').textContent = `${pxW}${pxH} px`;
        };
        window.printProcess = function() {
            if (!printImg) return; const dpi = parseInt(document.getElementById('printDPI').value), u = document.getElementById('printUnit').value;
            let w = parseFloat(document.getElementById('printWidth').value), h = parseFloat(document.getElementById('printHeight').value);
            if (u==='cm') { w/=2.54; h/=2.54; } else if (u==='mm') { w/=25.4; h/=25.4; }
            const pxW = Math.round(w*dpi), pxH = Math.round(h*dpi);
            const c = document.createElement('canvas'); c.width = pxW; c.height = pxH;
            c.getContext('2d').drawImage(printImg,0,0,pxW,pxH);
            c.toBlob(b => { printBlob = b; const u = URL.createObjectURL(b); document.getElementById('printReadyImage').src = u;
                document.getElementById('printReadyInfo').innerHTML = `<strong>Print Size:</strong> ${document.getElementById('printSizeDisplay').textContent}<br><strong>Pixels:</strong> ${pxW}${pxH} px<br><strong>DPI:</strong> ${dpi}`;
                document.getElementById('printDownloadBtn').style.display = 'flex'; showToast('Print ready!','success'); }, 'image/jpeg',0.95);
        };
        window.printDownloadImage = function() { if (printBlob) { const u = URL.createObjectURL(printBlob), a = document.createElement('a'); a.href = u; a.download = 'print_'+printFileName.replace(/\.[^/.]+$/,'')+'.jpg'; a.click(); URL.revokeObjectURL(u); } };
        window.printResetTool = function() { document.getElementById('printFileInput').value=''; document.getElementById('printPreview').style.display='none'; document.getElementById('printControls').style.display='none'; document.getElementById('printDownloadBtn').style.display='none'; printImg=null; printBlob=null; };

        // --------------------------------------------------------------
        // DPI RESIZE (REAL)
        // --------------------------------------------------------------
        let dpiImg = null, dpiBlob = null, dpiFileName = '';
        window.dpiHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; dpiFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                dpiImg = new Image(); dpiImg.onload = () => {
                    document.getElementById('originalDPIImage').src = e.target.result;
                    document.getElementById('dpiPreview').style.display = 'grid';
                    document.getElementById('dpiControls').style.display = 'block';
                    document.getElementById('originalDPIInfo').innerHTML = `<strong>Dimensions:</strong> ${dpiImg.width}${dpiImg.height} px`;
                    dpiUpdateCalculations();
                }; dpiImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.dpiUpdateUnit = function() { dpiUpdateCalculations(); };
        window.dpiUpdateKeepAspect = function() { dpiUpdateFromDimensions(); };
        window.dpiUpdateFromDimensions = function() { dpiUpdateCalculations(); };
        window.dpiUpdateCalculations = function() {
            if (!dpiImg) return; const unit = document.getElementById('dpiUnit').value; let w = parseFloat(document.getElementById('dpiWidth').value)||dpiImg.width, h = parseFloat(document.getElementById('dpiHeight').value)||dpiImg.height;
            const keep = document.getElementById('dpiKeepAspect').checked; if (keep && dpiImg) { const ar = dpiImg.width/dpiImg.height; if (document.activeElement.id==='dpiWidth') h = Math.round(w/ar); else if (document.activeElement.id==='dpiHeight') w = Math.round(h*ar); }
            document.getElementById('dpiWidth').value = w; document.getElementById('dpiHeight').value = h;
            let dpi = parseInt(document.getElementById('dpiValue').value); if (dpi === 'custom') { dpi = parseInt(document.getElementById('customDPIValue').value)||96; document.getElementById('customDPI').style.display='block'; } else { document.getElementById('customDPI').style.display='none'; }
            if (unit==='inch') { const win = w, hin = h; document.getElementById('calcPrintSize').textContent = `${win}${hin} in`; document.getElementById('calcPixels').textContent = `${Math.round(win*dpi)}${Math.round(hin*dpi)} px`; }
            else if (unit==='cm') { const win = w/2.54, hin = h/2.54; document.getElementById('calcPrintSize').textContent = `${w}${h} cm`; document.getElementById('calcPixels').textContent = `${Math.round(win*dpi)}${Math.round(hin*dpi)} px`; }
            else { document.getElementById('calcPrintSize').textContent = `${w}${h} px`; document.getElementById('calcPixels').textContent = `${w}${h} px`; }
        };
        window.dpiUpdateQualityLabel = function() { document.getElementById('dpiQualityValue').textContent = document.getElementById('dpiQuality').value+'%'; };
        window.dpiProcessResize = function() {
            if (!dpiImg) return; let w = parseInt(document.getElementById('dpiWidth').value), h = parseInt(document.getElementById('dpiHeight').value);
            if (document.getElementById('dpiUnit').value!=='px') { let dpi = parseInt(document.getElementById('dpiValue').value); if (dpi==='custom') dpi = parseInt(document.getElementById('customDPIValue').value)||96;
                const unit = document.getElementById('dpiUnit').value; if (unit==='inch') { w = Math.round(w*dpi); h = Math.round(h*dpi); } else if (unit==='cm') { w = Math.round(w*dpi/2.54); h = Math.round(h*dpi/2.54); } }
            const c = document.createElement('canvas'); c.width = w; c.height = h;
            c.getContext('2d').drawImage(dpiImg,0,0,w,h);
            const q = parseInt(document.getElementById('dpiQuality').value)/100;
            c.toBlob(b => { dpiBlob = b; const u = URL.createObjectURL(b); document.getElementById('resizedDPIImage').src = u;
                document.getElementById('resizedDPIInfo').innerHTML = `<strong>Dimensions:</strong> ${w}${h} px<br><strong>DPI:</strong> ${document.getElementById('dpiValue').value}`;
                document.getElementById('dpiDownloadBtn').style.display = 'flex'; showToast('Resized with DPI!','success'); }, 'image/jpeg', q);
        };
        window.dpiDownloadImage = function() { if (dpiBlob) { const u = URL.createObjectURL(dpiBlob), a = document.createElement('a'); a.href = u; a.download = 'dpi_'+dpiFileName; a.click(); URL.revokeObjectURL(u); } };
        window.dpiResetTool = function() { document.getElementById('dpiFileInput').value=''; document.getElementById('dpiPreview').style.display='none'; document.getElementById('dpiControls').style.display='none'; document.getElementById('dpiDownloadBtn').style.display='none'; dpiImg=null; dpiBlob=null; };

        // --------------------------------------------------------------
        // DIMENSION CALCULATOR (REAL)
        // --------------------------------------------------------------
        window.dimensionCalculate = function() {
            const f = document.getElementById('calcFromUnit').value, t = document.getElementById('calcToUnit').value;
            let w = parseFloat(document.getElementById('calcWidth').value)||0, h = parseFloat(document.getElementById('calcHeight').value)||0;
            const dpi = parseInt(document.getElementById('calcDPI').value)||96;
            if (f==='in') { w*=dpi; h*=dpi; } else if (f==='cm') { w*=dpi/2.54; h*=dpi/2.54; } else if (f==='mm') { w*=dpi/25.4; h*=dpi/25.4; }
            let wR = w, hR = h, uL = 'px'; if (t==='in') { wR/=dpi; hR/=dpi; uL='in'; } else if (t==='cm') { wR = (w/dpi)*2.54; hR = (h/dpi)*2.54; uL='cm'; } else if (t==='mm') { wR = (w/dpi)*25.4; hR = (h/dpi)*25.4; uL='mm'; }
            document.getElementById('calcResultWidth').textContent = `${wR.toFixed(2)} ${uL}`; document.getElementById('calcResultHeight').textContent = `${hR.toFixed(2)} ${uL}`;
            const ar = w/h; document.getElementById('calcAspectRatio').textContent = ar.toFixed(2);
        };
        window.dimensionSwapUnits = function() { const f = document.getElementById('calcFromUnit').value, t = document.getElementById('calcToUnit').value; document.getElementById('calcFromUnit').value = t; document.getElementById('calcToUnit').value = f; dimensionCalculate(); };
        window.dimensionReset = function() { document.getElementById('calcWidth').value=1920; document.getElementById('calcHeight').value=1080; document.getElementById('calcDPI').value=96; dimensionCalculate(); };
        dimensionCalculate();

        // --------------------------------------------------------------
        // CROP (REAL)
        // --------------------------------------------------------------
        let cropImg = null, cropBlob = null, cropFileName = '';
        window.cropHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; cropFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                cropImg = new Image(); cropImg.onload = () => {
                    document.getElementById('cropImage').src = e.target.result;
                    document.getElementById('cropPreview').style.display = 'grid';
                    document.getElementById('cropControls').style.display = 'block';
                    document.getElementById('cropX').max = cropImg.width-1; document.getElementById('cropY').max = cropImg.height-1;
                    document.getElementById('cropWidth').max = cropImg.width; document.getElementById('cropHeight').max = cropImg.height;
                    document.getElementById('cropWidth').value = Math.min(500, cropImg.width); document.getElementById('cropHeight').value = Math.min(500, cropImg.height);
                    cropUpdatePreview();
                }; cropImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.cropUpdatePreview = function() {
            if (!cropImg) return; const x = parseInt(document.getElementById('cropX').value), y = parseInt(document.getElementById('cropY').value), w = parseInt(document.getElementById('cropWidth').value), h = parseInt(document.getElementById('cropHeight').value);
            const ov = document.getElementById('cropOverlay'), img = document.getElementById('cropImage'); const s = img.width / cropImg.width;
            ov.style.left = (x*s)+'px'; ov.style.top = (y*s)+'px'; ov.style.width = (w*s)+'px'; ov.style.height = (h*s)+'px';
            const c = document.createElement('canvas'); c.width = w; c.height = h;
            c.getContext('2d').drawImage(cropImg, x, y, w, h, 0, 0, w, h);
            document.getElementById('croppedImage').src = c.toDataURL('image/jpeg',0.9);
            c.toBlob(b => cropBlob = b, 'image/jpeg',0.9);
        };
        window.cropApplyAspect = function() {
            const asp = document.getElementById('cropAspect').value; if (asp==='custom') return;
            const r = eval(asp.replace(':','/')); const cw = parseInt(document.getElementById('cropWidth').value);
            document.getElementById('cropHeight').value = Math.round(cw / r); cropUpdatePreview();
        };
        window.cropProcess = function() { cropUpdatePreview(); document.getElementById('cropDownloadBtn').style.display = 'flex'; showToast('Cropped!','success'); };
        window.cropDownloadImage = function() { if (cropBlob) { const u = URL.createObjectURL(cropBlob), a = document.createElement('a'); a.href = u; a.download = 'cropped_'+cropFileName; a.click(); URL.revokeObjectURL(u); } };
        window.cropResetTool = function() { document.getElementById('cropFileInput').value=''; document.getElementById('cropPreview').style.display='none'; document.getElementById('cropControls').style.display='none'; document.getElementById('cropDownloadBtn').style.display='none'; cropImg=null; cropBlob=null; };

        // --------------------------------------------------------------
        // OPTIMIZE (REAL)
        // --------------------------------------------------------------
        let optimizeImg = null, optimizeBlob = null, optimizeFileName = '', optimizeOriginalSize = 0;
        window.optimizeHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; optimizeFileName = f.name; optimizeOriginalSize = f.size;
            const r = new FileReader(); r.onload = (e) => {
                optimizeImg = new Image(); optimizeImg.onload = () => {
                    document.getElementById('originalOptimizeImage').src = e.target.result;
                    document.getElementById('optimizePreview').style.display = 'grid';
                    document.getElementById('optimizeControls').style.display = 'block';
                    document.getElementById('originalOptimizeInfo').innerHTML = `<strong>Dimensions:</strong> ${optimizeImg.width}${optimizeImg.height}<br><strong>File Size:</strong> ${formatFileSize(f.size)}`;
                    optimizeSetPreset('medium');
                }; optimizeImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.optimizeSetPreset = function(sz) {
            if (!optimizeImg) return; let tw = 800; if (sz==='small') tw=640; else if (sz==='large') tw=1200;
            const th = Math.round(tw / (optimizeImg.width/optimizeImg.height));
            document.getElementById('optimizeWidth').value = tw; document.getElementById('optimizeHeight').value = th;
        };
        window.optimizeUpdateQualityLabel = function() { document.getElementById('optimizeQualityValue').textContent = document.getElementById('optimizeQuality').value+'%'; };
        window.optimizeProcess = function() {
            if (!optimizeImg) return; document.getElementById('optimizeProgress').classList.add('active');
            let w = parseInt(document.getElementById('optimizeWidth').value)||optimizeImg.width, h = parseInt(document.getElementById('optimizeHeight').value)||optimizeImg.height;
            if (document.getElementById('optimizeKeepAspect').checked) { const ar = optimizeImg.width/optimizeImg.height; if (w) h = Math.round(w/ar); else if (h) w = Math.round(h*ar); }
            const c = document.createElement('canvas'); c.width = w; c.height = h;
            c.getContext('2d').drawImage(optimizeImg,0,0,w,h);
            const q = parseInt(document.getElementById('optimizeQuality').value)/100;
            let prog=0; const iv = setInterval(()=>{ prog+=10; document.getElementById('optimizeProgressFill').style.width=prog+'%'; document.getElementById('optimizeProgressText').textContent=`Optimizing... ${prog}%`;
                if (prog>=100) { clearInterval(iv);
                    c.toBlob(b => { optimizeBlob = b; const u = URL.createObjectURL(b); document.getElementById('optimizedImage').src = u;
                        document.getElementById('optimizedInfo').innerHTML = `<strong>Dimensions:</strong> ${w}${h}<br><strong>File Size:</strong> ${formatFileSize(b.size)}<br><strong>Reduction:</strong> ${Math.round((1-b.size/optimizeOriginalSize)*100)}%`;
                        document.getElementById('optimizeDownloadBtn').style.display='flex'; document.getElementById('optimizeProgress').classList.remove('active'); showToast(`Optimized to ${formatFileSize(b.size)}`,'success');
                    }, 'image/jpeg', q);
                } }, 50);
        };
        window.optimizeDownloadImage = function() { if (optimizeBlob) { const u = URL.createObjectURL(optimizeBlob), a = document.createElement('a'); a.href = u; a.download = 'optimized_'+optimizeFileName.replace(/\.[^/.]+$/,'')+'.jpg'; a.click(); URL.revokeObjectURL(u); } };
        window.optimizeResetTool = function() { document.getElementById('optimizeFileInput').value=''; document.getElementById('optimizePreview').style.display='none'; document.getElementById('optimizeControls').style.display='none'; document.getElementById('optimizeDownloadBtn').style.display='none'; document.getElementById('optimizeProgress').classList.remove('active'); optimizeImg=null; optimizeBlob=null; };

        // --------------------------------------------------------------
        // EXIF VIEWER (REAL)  basic image info
        // --------------------------------------------------------------
        window.exifHandleUpload = function(files) {
            const grid = document.getElementById('exifGrid'); grid.innerHTML = ''; document.getElementById('exifContainer').style.display = 'block';
            if (!files.length) { document.getElementById('noExifData').style.display='block'; return; }
            document.getElementById('noExifData').style.display='none';
            Array.from(files).forEach(f => {
                const r = new FileReader(); r.onload = (e) => {
                    const img = new Image(); img.onload = () => {
                        const card = document.createElement('div'); card.className = 'preview-card';
                        card.innerHTML = `<h4><i class="fas fa-image"></i> ${f.name}</h4><div><img src="${e.target.result}" style="max-width:100%; max-height:200px; border-radius:8px;"></div>
                            <div class="exif-data"><div class="exif-row"><span class="exif-label">File Name:</span><span class="exif-value">${f.name}</span></div>
                            <div class="exif-row"><span class="exif-label">File Size:</span><span class="exif-value">${formatFileSize(f.size)}</span></div>
                            <div class="exif-row"><span class="exif-label">Dimensions:</span><span class="exif-value">${img.width}${img.height} px</span></div>
                            <div class="exif-row"><span class="exif-label">Aspect Ratio:</span><span class="exif-value">${(img.width/img.height).toFixed(2)}</span></div>
                            <div class="exif-row"><span class="exif-label">Megapixels:</span><span class="exif-value">${(img.width*img.height/1e6).toFixed(2)} MP</span></div>
                            <div class="exif-row"><span class="exif-label">File Type:</span><span class="exif-value">${f.type||'Unknown'}</span></div></div>`;
                        grid.appendChild(card);
                    }; img.src = e.target.result;
                }; r.readAsDataURL(f);
            });
        };

        // --------------------------------------------------------------
        // WATERMARK (REAL)  text only, fully functional
        // --------------------------------------------------------------
        let watermarkImg = null, watermarkBlob = null, watermarkFileName = '';
        window.watermarkHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; watermarkFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                watermarkImg = new Image(); watermarkImg.onload = () => {
                    document.getElementById('originalWatermarkImage').src = e.target.result;
                    document.getElementById('watermarkPreview').style.display = 'grid';
                    document.getElementById('watermarkControls').style.display = 'block';
                    watermarkUpdatePreview();
                }; watermarkImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.watermarkUpdatePreview = function() {
            if (!watermarkImg) return; const c = document.createElement('canvas'); c.width = watermarkImg.width; c.height = watermarkImg.height;
            const ctx = c.getContext('2d'); ctx.drawImage(watermarkImg,0,0);
            const text = document.getElementById('watermarkText').value || ' FastResizePro';
            const fontSize = parseInt(document.getElementById('watermarkFontSize').value); document.getElementById('fontSizeValue').textContent = fontSize+'px';
            const color = document.getElementById('watermarkColor').value; const opacity = parseInt(document.getElementById('watermarkOpacity').value)/100; document.getElementById('opacityValue').textContent = (opacity*100)+'%';
            ctx.font = `bold ${fontSize}px Arial`; ctx.fillStyle = color; ctx.globalAlpha = opacity;
            const m = ctx.measureText(text); const tw = m.width, th = fontSize;
            const pos = document.getElementById('watermarkPosition').value, margin = parseInt(document.getElementById('watermarkMargin').value); document.getElementById('marginValue').textContent = margin+'px';
            let x,y; if (pos==='top-left') { x=margin; y=margin+th; } else if (pos==='top-right') { x=c.width-tw-margin; y=margin+th; } else if (pos==='center') { x=(c.width-tw)/2; y=(c.height+th)/2; } else if (pos==='bottom-left') { x=margin; y=c.height-margin; } else { x=c.width-tw-margin; y=c.height-margin; }
            ctx.fillText(text, x, y);
            c.toBlob(b => { watermarkBlob = b; const u = URL.createObjectURL(b); document.getElementById('watermarkedImage').src = u; }, 'image/jpeg',0.9);
        };
        window.watermarkProcess = function() { watermarkUpdatePreview(); document.getElementById('watermarkDownloadBtn').style.display = 'flex'; showToast('Watermark applied!','success'); };
        window.watermarkDownloadImage = function() { if (watermarkBlob) { const u = URL.createObjectURL(watermarkBlob), a = document.createElement('a'); a.href = u; a.download = 'watermarked_'+watermarkFileName; a.click(); URL.revokeObjectURL(u); } };
        window.watermarkResetTool = function() { document.getElementById('watermarkFileInput').value=''; document.getElementById('watermarkPreview').style.display='none'; document.getElementById('watermarkControls').style.display='none'; document.getElementById('watermarkDownloadBtn').style.display='none'; watermarkImg=null; watermarkBlob=null; };

        // --------------------------------------------------------------
        // UPSCALE (REAL)  simple resize up
        // --------------------------------------------------------------
        let upscaleImg = null, upscaleBlob = null, upscaleFileName = '', upscaleFactor = 2;
        window.upscaleHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; upscaleFileName = f.name;
            const r = new FileReader(); r.onload = (e) => {
                upscaleImg = new Image(); upscaleImg.onload = () => {
                    document.getElementById('originalUpscaleImage').src = e.target.result;
                    document.getElementById('upscalePreview').style.display = 'grid';
                    document.getElementById('upscaleControls').style.display = 'block';
                    document.getElementById('originalUpscaleInfo').innerHTML = `<strong>Dimensions:</strong> ${upscaleImg.width}${upscaleImg.height}<br><strong>File Size:</strong> ${formatFileSize(f.size)}`;
                    document.getElementById('originalUpscaleDimensions').textContent = `${upscaleImg.width}${upscaleImg.height}`;
                    upscaleSetFactor(2);
                }; upscaleImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.upscaleSetFactor = function(f) {
            upscaleFactor = f; document.querySelectorAll('#upscaleControls .btn-outline').forEach(b=>{b.classList.remove('btn-primary'); b.classList.add('btn-outline');});
            event.target.classList.remove('btn-outline'); event.target.classList.add('btn-primary');
            if (upscaleImg) { const w = upscaleImg.width*f, h = upscaleImg.height*f; document.getElementById('upscaledDimensions').textContent = `${w}${h}`; }
        };
        window.upscaleProcess = function() {
            if (!upscaleImg) return; document.getElementById('upscaleProgress').classList.add('active');
            const w = upscaleImg.width * upscaleFactor, h = upscaleImg.height * upscaleFactor;
            const c = document.createElement('canvas'); c.width = w; c.height = h;
            const ctx = c.getContext('2d'); const enh = document.getElementById('upscaleEnhance').value;
            if (enh==='smooth') { ctx.imageSmoothingEnabled = true; ctx.imageSmoothingQuality = 'high'; } else ctx.imageSmoothingEnabled = false;
            ctx.drawImage(upscaleImg,0,0,w,h);
            let prog=0; const iv = setInterval(()=>{ prog+=10; document.getElementById('upscaleProgressFill').style.width=prog+'%'; document.getElementById('upscaleProgressText').textContent=`Upscaling... ${prog}%`;
                if (prog>=100) { clearInterval(iv);
                    c.toBlob(b => { upscaleBlob = b; const u = URL.createObjectURL(b); document.getElementById('upscaledImage').src = u;
                        document.getElementById('upscaledInfo').innerHTML = `<strong>Dimensions:</strong> ${w}${h}<br><strong>Factor:</strong> ${upscaleFactor}x`;
                        document.getElementById('upscaleDownloadBtn').style.display='flex'; document.getElementById('upscaleProgress').classList.remove('active'); showToast(`Upscaled ${upscaleFactor}x`,'success');
                    }, 'image/jpeg',0.95);
                } }, 50);
        };
        window.upscaleDownloadImage = function() { if (upscaleBlob) { const u = URL.createObjectURL(upscaleBlob), a = document.createElement('a'); a.href = u; a.download = 'upscaled_'+upscaleFactor+'x_'+upscaleFileName; a.click(); URL.revokeObjectURL(u); } };
        window.upscaleResetTool = function() { document.getElementById('upscaleFileInput').value=''; document.getElementById('upscalePreview').style.display='none'; document.getElementById('upscaleControls').style.display='none'; document.getElementById('upscaleDownloadBtn').style.display='none'; document.getElementById('upscaleProgress').classList.remove('active'); upscaleImg=null; upscaleBlob=null; };

        // --------------------------------------------------------------
        // WEBP CONVERT (REAL)
        // --------------------------------------------------------------
        let webpImg = null, webpBlob = null, webpFileName = '', webpOriginalSize = 0;
        window.webpHandleUpload = function(files) {
            if (!files.length) return; const f = files[0]; webpFileName = f.name; webpOriginalSize = f.size;
            const r = new FileReader(); r.onload = (e) => {
                webpImg = new Image(); webpImg.onload = () => {
                    document.getElementById('originalWebPImage').src = e.target.result;
                    document.getElementById('webpPreview').style.display = 'grid';
                    document.getElementById('webpControls').style.display = 'block';
                    document.getElementById('originalWebPInfo').innerHTML = `<strong>Dimensions:</strong> ${webpImg.width}${webpImg.height}<br><strong>File Size:</strong> ${formatFileSize(f.size)}`;
                }; webpImg.src = e.target.result;
            }; r.readAsDataURL(f);
        };
        window.webpUpdateQualityLabel = function() { document.getElementById('webpQualityValue').textContent = document.getElementById('webpQuality').value+'%'; };
        window.webpToggleResize = function() { document.getElementById('webpResizeControls').style.display = document.getElementById('webpResize').checked?'block':'none'; };
        window.webpProcessConversion = function() {
            if (!webpImg) return; document.getElementById('webpProgress').classList.add('active');
            const c = document.createElement('canvas');
            if (document.getElementById('webpResize').checked) { let w = parseInt(document.getElementById('webpWidth').value)||webpImg.width, h = parseInt(document.getElementById('webpHeight').value)||webpImg.height;
                if (document.getElementById('webpKeepAspect').checked) { const ar = webpImg.width/webpImg.height; if (w) h = Math.round(w/ar); else if (h) w = Math.round(h*ar); }
                c.width = w; c.height = h; } else { c.width = webpImg.width; c.height = webpImg.height; }
            c.getContext('2d').drawImage(webpImg,0,0,c.width,c.height);
            const q = parseInt(document.getElementById('webpQuality').value)/100;
            let prog=0; const iv = setInterval(()=>{ prog+=10; document.getElementById('webpProgressFill').style.width=prog+'%'; document.getElementById('webpProgressText').textContent=`Converting... ${prog}%`;
                if (prog>=100) { clearInterval(iv);
                    c.toBlob(b => { webpBlob = b; const u = URL.createObjectURL(b); document.getElementById('convertedWebPImage').src = u;
                        document.getElementById('convertedWebPInfo').innerHTML = `<strong>Dimensions:</strong> ${c.width}${c.height}<br><strong>File Size:</strong> ${formatFileSize(b.size)}<br><strong>Reduction:</strong> ${Math.round((1-b.size/webpOriginalSize)*100)}%`;
                        document.getElementById('webpDownloadBtn').style.display='flex'; document.getElementById('webpProgress').classList.remove('active'); showToast('Converted to WebP','success');
                    }, 'image/webp', q);
                } }, 50);
        };
        window.webpDownloadImage = function() { if (webpBlob) { const u = URL.createObjectURL(webpBlob), a = document.createElement('a'); a.href = u; a.download = 'converted_'+webpFileName.replace(/\.[^/.]+$/,'')+'.webp'; a.click(); URL.revokeObjectURL(u); } };
        window.webpResetTool = function() { document.getElementById('webpFileInput').value=''; document.getElementById('webpPreview').style.display='none'; document.getElementById('webpControls').style.display='none'; document.getElementById('webpDownloadBtn').style.display='none'; document.getElementById('webpProgress').classList.remove('active'); webpImg=null; webpBlob=null; };

        // --------------------------------------------------------------
        // BATCH RESIZE (REAL) with JSZip
        // --------------------------------------------------------------
        let batchFiles = [], batchBlobs = [], batchZip = null;
        window.batchHandleUpload = function(files) {
            batchFiles = Array.from(files);
            const list = document.getElementById('batchFileItems');
            list.innerHTML = batchFiles.map((f,i)=>`<div style="display:flex;justify-content:space-between;align-items:center;padding:0.5rem;border-bottom:1px solid var(--gray-light);"><div><i class="fas fa-image" style="color:var(--primary);"></i> ${f.name} <span style="font-size:0.8rem;color:var(--gray);">${formatFileSize(f.size)}</span></div><button class="btn btn-outline" style="padding:0.25rem 0.5rem;" onclick="batchRemoveFile(${i})"><i class="fas fa-times"></i></button></div>`).join('');
            document.getElementById('batchFileList').style.display='block'; document.getElementById('batchControls').style.display='block'; document.getElementById('batchDownloadBtn').style.display='none';
        };
        window.batchRemoveFile = function(i) { batchFiles.splice(i,1); if (batchFiles.length) batchHandleUpload(batchFiles); else { document.getElementById('batchFileList').style.display='none'; document.getElementById('batchControls').style.display='none'; } };
        window.batchUpdateMode = function() { const m = document.getElementById('batchResizeMode').value; document.getElementById('batchPercentageControl').style.display = m==='percentage'?'block':'none'; document.getElementById('batchDimensionsControl').style.display = (m==='width'||m==='height')?'block':'none'; };
        window.batchUpdatePercentageLabel = function() { document.getElementById('batchPercentageValue').textContent = document.getElementById('batchPercentage').value+'%'; };
        window.batchUpdateQualityLabel = function() { document.getElementById('batchQualityValue').textContent = document.getElementById('batchQuality').value+'%'; };
        window.batchProcess = function() {
            if (!batchFiles.length) return; document.getElementById('batchProgress').classList.add('active');
            const mode = document.getElementById('batchResizeMode').value, quality = parseInt(document.getElementById('batchQuality').value)/100;
            const zip = new JSZip(); let processed = 0;
            batchFiles.forEach((file, idx) => {
                const r = new FileReader(); r.onload = (e) => {
                    const img = new Image(); img.onload = () => {
                        let w = img.width, h = img.height;
                        if (mode === 'percentage') { const p = parseInt(document.getElementById('batchPercentage').value)/100; w = Math.round(img.width*p); h = Math.round(img.height*p); }
                        else if (mode === 'width') { w = parseInt(document.getElementById('batchWidth').value)||img.width; h = Math.round(w * (img.height/img.width)); }
                        else if (mode === 'height') { h = parseInt(document.getElementById('batchWidth').value)||img.height; w = Math.round(h * (img.width/img.height)); }
                        const c = document.createElement('canvas'); c.width = w; c.height = h;
                        c.getContext('2d').drawImage(img,0,0,w,h);
                        c.toBlob(b => {
                            zip.file(`resized_${idx+1}_${file.name.replace(/\.[^/.]+$/,'')}.jpg`, b);
                            processed++; const prog = Math.round((processed/batchFiles.length)*100);
                            document.getElementById('batchProgressFill').style.width = prog+'%'; document.getElementById('batchProgressText').textContent = `${processed}/${batchFiles.length} files`; document.getElementById('batchProgressPercent').textContent = prog+'%';
                            if (processed === batchFiles.length) {
                                zip.generateAsync({type:'blob'}).then(content => { batchZip = content; document.getElementById('batchDownloadBtn').style.display='flex'; document.getElementById('batchProgress').classList.remove('active'); showToast(`Processed ${batchFiles.length} files`,'success'); });
                            }
                        }, 'image/jpeg', quality);
                    }; img.src = e.target.result;
                }; r.readAsDataURL(file);
            });
        };
        window.batchDownloadZip = function() { if (batchZip) { const u = URL.createObjectURL(batchZip), a = document.createElement('a'); a.href = u; a.download = 'resized_images.zip'; a.click(); URL.revokeObjectURL(u); } };
        window.batchResetTool = function() { document.getElementById('batchFileInput').value=''; document.getElementById('batchFileList').style.display='none'; document.getElementById('batchControls').style.display='none'; document.getElementById('batchDownloadBtn').style.display='none'; document.getElementById('batchProgress').classList.remove('active'); batchFiles=[]; batchZip=null; };

        // --------------------------------------------------------------
        // Initialize
        // --------------------------------------------------------------
        document.addEventListener('DOMContentLoaded', function() {
            aspectLoadPresets(); dimensionCalculate(); compressUpdateQualityLabel(); optimizeUpdateQualityLabel(); webpUpdateQualityLabel(); batchUpdatePercentageLabel(); batchUpdateQualityLabel(); batchUpdateMode();
        });
    </script>

<script>
  atOptions = {
    'key' : 'd0986cdd6c7e565f330cb00eccc416f7',
    'format' : 'iframe',
    'height' : 60,
    'width' : 468,
    'params' : {}
  };
</script>
<script src="https://instantmemorize.com/d0986cdd6c7e565f330cb00eccc416f7/invoke.js"></script>

<footer style="background:#0a0a0a;padding:30px 10px;text-align:center;border-top:2px solid #ff0000;font-family:sans-serif;position:relative;overflow:hidden;">

  <h2 style="margin:0;color:white;">
    Fast<span style="color:#ff0000;text-shadow:0 0 10px #ff0000;">Resize</span>Pro
  </h2>

  <p class="slogan">
    Speed  Quality  Simplicity
  </p>

  <div style="margin:15px 0;">
    <a href="#" class="icon"><i class="fab fa-instagram"></i></a>
    <a href="#" class="icon"><i class="fab fa-facebook"></i></a>
    <a href="#" class="icon"><i class="fab fa-youtube"></i></a>
  </div>

  <p style="font-size:12px;color:#666;margin:0;">
     2026 FastResizePro All Rights Reserved
  </p>

</footer>

<style>

/* Slogan Glow + Scan Effect */
.slogan{
  margin:6px 0 15px;
  font-size:13px;
  color:#ff4d4d;
  position:relative;
  display:inline-block;
  animation: glow 3s ease-in-out infinite alternate;
  overflow:hidden;
}

.slogan::after{
  content:"";
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(120deg,transparent,rgba(255,255,255,0.6),transparent);
  animation: scan 4s linear infinite;
}

@keyframes glow{
  from{ text-shadow:0 0 5px #ff0000; }
  to{
    text-shadow:
      0 0 10px #ff0000,
      0 0 20px #ff0000,
      0 0 40px #ff0000;
  }
}

@keyframes scan{
  0%{ left:-100%; }
  100%{ left:100%; }
}

/* Social Icons */
.icon{
  color:#ff0000;
  margin:0 12px;
  font-size:20px;
  text-decoration:none;
  transition:.3s;
}

.icon:hover{
  transform:scale(1.2);
  text-shadow:
    0 0 10px #ff0000,
    0 0 25px #ff0000;
}

</style>

<!-- FontAwesome -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>

</body>
</html>
